(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ad_user"],{4874:function(e,t,a){"use strict";a("5371")},"49b3":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-user container py-5"},[a("h2",[e._v("Nutzer bearbeiten")]),a("AccountDataForm",{attrs:{"api-users-schema":"admin"}})],1)},s=[],i=a("986e"),n={name:"AdminEditUser",components:{AccountDataForm:i["a"]}},l=n,o=a("2877"),u=Object(o["a"])(l,r,s,!1,null,null,null);t["default"]=u.exports},5371:function(e,t,a){},"986e":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account-data-form position-relative mb-3"},[a("b-form",{attrs:{id:"account-data-form"}},[a("label",{attrs:{for:"user-gender"}},[e._v("Anrede")]),a("b-form-select",{attrs:{id:"user-gender",state:e.validated&&!!e.user.gender||null,disabled:e.disabled},model:{value:e.user.gender,callback:function(t){e.$set(e.user,"gender",t)},expression:"user.gender"}},[a("b-form-select-option",{attrs:{value:""}},[e._v("-- Anrede auswählen --")]),e._l(e.contactGenderOptions,(function(t){return a("b-form-select-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],2),a("label",{attrs:{for:"user-title"}},[e._v("Titel")]),a("b-form-select",{attrs:{id:"user-title",state:e.validated&&!!e.user.title||null,disabled:e.disabled},model:{value:e.user.title,callback:function(t){e.$set(e.user,"title",t)},expression:"user.title"}},[a("b-form-select-option",{attrs:{value:""}},[e._v("-- Titel auswählen --")]),e._l(e.contactTitleOptions,(function(t){return a("b-form-select-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],2),a("label",{attrs:{for:"first-name",required:""}},[e._v("Vorname")]),a("b-form-input",{attrs:{id:"first-name",type:"text",state:e.validated?!!e.user.firstName:null,placeholder:"Vorname eingeben...",required:"",disabled:e.disabled},model:{value:e.user.firstName,callback:function(t){e.$set(e.user,"firstName",t)},expression:"user.firstName"}}),a("label",{attrs:{for:"last-name",required:""}},[e._v("Nachname")]),a("b-form-input",{attrs:{id:"last-name",type:"text",state:e.validated?!!e.user.lastName:null,placeholder:"Nachname eingeben...",required:"",disabled:e.disabled},model:{value:e.user.lastName,callback:function(t){e.$set(e.user,"lastName",t)},expression:"user.lastName"}}),a("label",{attrs:{for:"email",required:""}},[e._v("E-Mail Adresse")]),a("b-form-input",{attrs:{id:"email",type:"email",state:e.validated?!!e.user.email:null,placeholder:"E-Mail Adresse eingeben...",required:"",disabled:e.disabled},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),a("label",{staticClass:"d-block",attrs:{for:"role"}},[e._v("Rolle")]),a("b-form-checkbox",{attrs:{id:"is-employer",value:!0,"unchecked-value":!1,disabled:e.disabled,inline:""},model:{value:e.user.isEmployer,callback:function(t){e.$set(e.user,"isEmployer",t)},expression:"user.isEmployer"}},[e._v(" Arbeitgeber ")]),a("b-form-checkbox",{attrs:{id:"is-employee",value:!0,"unchecked-value":!1,disabled:e.disabled,inline:""},model:{value:e.user.isEmployee,callback:function(t){e.$set(e.user,"isEmployee",t)},expression:"user.isEmployee"}},[e._v(" MFA / ZFA ")]),a("b-form-checkbox",{attrs:{id:"is-educational",value:!0,"unchecked-value":!1,disabled:e.disabled,inline:""},model:{value:e.user.isEducational,callback:function(t){e.$set(e.user,"isEducational",t)},expression:"user.isEducational"}},[e._v(" Fortbildungsanbieter ")]),a("div",{staticClass:"d-flex justify-content-between my-4"},[a("b-button",{attrs:{variant:e.disabled?"primary":"outline-danger",size:"sm"},on:{click:function(t){e.disabled=!e.disabled}}},[e.disabled?a("svg",{staticClass:"bi bi-pencil-square mr-2",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}}),a("path",{attrs:{"fill-rule":"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"}})]):e._e(),e._v(" "+e._s(e.disabled?"Bearbeiten":"Abbrechen")+" ")]),e.disabled?e._e():a("b-button",{attrs:{variant:"success",size:"sm"},on:{click:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[e._v(" Speichern ")])],1)],1)],1)},s=[],i=a("1da1"),n=(a("96cf"),a("99af"),a("1ba6")),l={name:"AccountDataForm",props:{apiUsersSchema:{type:String,default:"private"}},data:function(){return{user:{_id:"",gender:null,title:null,firstName:"",lastName:"",email:"",isEmployer:!1,isEmployee:!1,isEducational:!1},contactGenderOptions:n["d"],contactTitleOptions:n["e"],disabled:!0,validated:null}},computed:{userQuery:function(){return"admin"===this.apiUsersSchema?"adminUser":"me"}},created:function(){this.getUserData()},methods:{getUserData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.$store.dispatch("setOverlay",!0),t.next=4,e.$axios.get("/graphql",{params:{query:"\n              query {\n                  ".concat(e.userQuery," ").concat("admin"===e.apiUsersSchema?'(_id: "'.concat(e.$route.params.userId,'")'):"","\n                {\n                  _id\n                  gender\n                  title\n                  firstName\n                  lastName\n                  email\n                  isEmployer\n                  isEmployee\n                  isEducational\n                }\n              }\n            ")}});case 4:a=t.sent,a.data.data[e.userQuery]&&(e.user=a.data.data[e.userQuery]),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:e.$store.dispatch("setOverlay",!1);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},onSubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.formValidation()){t.next=27;break}return e.$store.dispatch("setOverlay",!0),t.prev=2,a="admin"===e.apiUsersSchema?"adminUpdateUser":"updateMe",t.next=6,e.$axios.post("/graphql",{query:"\n              mutation {\n                  ".concat(a," (\n                      ").concat("admin"===e.apiUsersSchema?'_id: "'.concat(e.user._id,'",'):"",'\n                      gender: "').concat(e.user.gender,'",\n                      title: "').concat(e.user.title,'",\n                      firstName: "').concat(e.user.firstName,'",\n                      lastName: "').concat(e.user.lastName,'",\n                      email: "').concat(e.user.email.toLowerCase(),'",\n                      isEmployer: ').concat(e.user.isEmployer,",\n                      isEmployee: ").concat(e.user.isEmployee,",\n                      isEducational: ").concat(e.user.isEducational,",\n                  ) {\n                      _id\n                      status\n                  }\n              }\n          ")});case 6:if(r=t.sent,!r.data.data[a]){t.next=20;break}return e.disabled=!0,t.next=11,e.$store.dispatch("fetchUserFromDb");case 11:if(e.$root.$bvToast.toast("Ihre Daten wurden erfolgreich gespeichert.",{title:"Daten gespeichert",variant:"success",toaster:"b-toaster-bottom-right",solid:!0}),"pending"!==r.data.data[a].status||e.$store.state.auth.user.isAdmin){t.next=18;break}return t.next=15,e.$store.dispatch("fetchUserFromDb");case 15:return t.next=17,e.$axios.get("/api/auth/verification/get-activation-email");case 17:e.$root.$bvToast.toast("In den nächsten Minuten erhalten Sie eine E-Mail zur Verifizierung Ihrer E-Mail Adresse in Ihr Postfach. Bitte bestätigen Sie Ihre E-Mail Adresse über den dort enthaltenen Bestätigunglink.",{title:"E-Mail verifizieren",variant:"info",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 18:t.next=21;break;case 20:throw new Error("Beim Speichern ist ein Fehler aufgetreten.");case 21:t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](2),e.$root.$bvToast.toast("Beim Speichern Ihrer Daten ist ein Fehler aufgetreten. Bitte versuchen Sie es noch einmal.",{title:"Fehler beim Speichern",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 26:e.$store.dispatch("setOverlay",!1);case 27:case"end":return t.stop()}}),t,null,[[2,23]])})))()},formValidation:function(){return this.validated=!0,!!(this.user.firstName&&this.user.lastName&&this.user.email)}}},o=l,u=(a("4874"),a("2877")),c=Object(u["a"])(o,r,s,!1,null,"12590b8c",null);t["a"]=c.exports}}]);
//# sourceMappingURL=ad_user-legacy.db1dbf1e.js.map