(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ad_payment"],{"4e07":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"edit-payment container py-5"},[n("h2",[e._v("Zahlung bearbeiten")]),n("PaymentForm")],1)},i=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"payment-form position-relative"},[n("b-form",{staticClass:"payment-form"},[n("label",{attrs:{for:"user-id"}},[e._v("User ID")]),n("b-form-input",{attrs:{id:"user-id",type:"text",placeholder:"User ID eingeben...",trim:"",required:""},model:{value:e.payment.user,callback:function(t){e.$set(e.payment,"user",t)},expression:"payment.user"}}),n("label",{attrs:{for:"job-id"}},[e._v("Job ID")]),n("b-form-input",{attrs:{id:"job-id",type:"text",placeholder:"Job ID eingeben...",trim:"",required:""},model:{value:e.payment.job,callback:function(t){e.$set(e.payment,"job",t)},expression:"payment.job"}}),n("label",{attrs:{for:"coupon-id"}},[e._v("Coupon ID")]),n("b-form-input",{attrs:{id:"coupon-id",type:"text",placeholder:"Coupon ID eingeben...",trim:""},model:{value:e.payment.coupon,callback:function(t){e.$set(e.payment,"coupon",t)},expression:"payment.coupon"}}),n("label",{attrs:{for:"payment-status"}},[e._v("Payment Status")]),n("b-form-select",{attrs:{id:"payment-status"},model:{value:e.payment.status,callback:function(t){e.$set(e.payment,"status",t)},expression:"payment.status"}},[n("b-form-select-option",{attrs:{value:""}},[e._v("-- Status auswählen --")]),n("b-form-select-option",{attrs:{value:"pending"}},[e._v("pending")]),n("b-form-select-option",{attrs:{value:"paid"}},[e._v("paid")]),n("b-form-select-option",{attrs:{value:"cancelled"}},[e._v("cancelled")])],1),n("label",{attrs:{for:"invoice-no"}},[e._v("Invoice No")]),n("b-form-input",{attrs:{id:"invoice-no",type:"number",placeholder:"Invoice No eingeben...",trim:""},model:{value:e.payment.invoiceNo,callback:function(t){e.$set(e.payment,"invoiceNo",t)},expression:"payment.invoiceNo"}}),n("label",{attrs:{for:"invoice-date"}},[e._v("Invoice Date")]),n("b-form-datepicker",{attrs:{id:"invoice-date",placeholder:"Invoice Date eingeben...","value-as-date":!0},model:{value:e.invoiceDate,callback:function(t){e.invoiceDate=t},expression:"invoiceDate"}}),n("label",{attrs:{for:"payment-type"}},[e._v("Payment Status")]),n("b-form-select",{attrs:{id:"payment-type"},model:{value:e.payment.paymentType,callback:function(t){e.$set(e.payment,"paymentType",t)},expression:"payment.paymentType"}},[n("b-form-select-option",{attrs:{value:"invoice"}},[e._v("invoice")]),n("b-form-select-option",{attrs:{value:"stripe"}},[e._v("stripe")])],1),n("label",{attrs:{for:"pricing-package"}},[e._v("Pricing Package")]),n("b-form-select",{attrs:{id:"pricing-package"},model:{value:e.payment.pricingPackage,callback:function(t){e.$set(e.payment,"pricingPackage",t)},expression:"payment.pricingPackage"}},[n("b-form-select-option",{attrs:{value:""}},[e._v("-- Choose Pricing Package --")]),e._l(e.$config.pricingPackages,(function(t){return n("b-form-select-option",{key:t.name,attrs:{value:t.name}},[e._v(e._s(t.name))])}))],2),n("label",{attrs:{for:"amount"}},[e._v("Amount [Cents]")]),n("b-form-input",{attrs:{id:"amount",type:"number",min:"0",placeholder:"Amount eingeben..."},model:{value:e.payment.amount,callback:function(t){e.$set(e.payment,"amount",t)},expression:"payment.amount"}}),n("label",{attrs:{for:"fee"}},[e._v("Fee [Cents]")]),n("b-form-input",{attrs:{id:"fee",type:"number",min:"0",placeholder:"Fee eingeben..."},model:{value:e.payment.fee,callback:function(t){e.$set(e.payment,"fee",t)},expression:"payment.fee"}}),n("label",{attrs:{for:"taxes"}},[e._v("Taxes [Cents]")]),n("b-form-input",{attrs:{id:"taxes",type:"number",min:"0",placeholder:"Taxes eingeben...",trim:""},model:{value:e.payment.taxes,callback:function(t){e.$set(e.payment,"taxes",t)},expression:"payment.taxes"}}),n("label",{attrs:{for:"billing-email"}},[e._v("Billing Email Address")]),n("b-form-input",{attrs:{id:"billing-email",type:"text",placeholder:"Billing Email Address eingeben...",trim:"",required:""},model:{value:e.payment.billingEmail,callback:function(t){e.$set(e.payment,"billingEmail",t)},expression:"payment.billingEmail"}}),n("label",{attrs:{for:"billing-phone"}},[e._v("Billing Phone Number")]),n("b-form-input",{attrs:{id:"billing-phone",type:"text",placeholder:"Billing Phone Number eingeben...",trim:""},model:{value:e.payment.billingPhone,callback:function(t){e.$set(e.payment,"billingPhone",t)},expression:"payment.billingPhone"}}),n("label",{attrs:{for:"billing-company"}},[e._v("Billing Company")]),n("b-input",{attrs:{id:"billing-company",type:"text",placeholder:"Billing Company eingeben...",trim:""},model:{value:e.payment.billingCompany,callback:function(t){e.$set(e.payment,"billingCompany",t)},expression:"payment.billingCompany"}}),n("label",{attrs:{for:"billing-department"}},[e._v("Billing Department")]),n("b-input",{attrs:{id:"billing-department",type:"text",placeholder:"Billing Department eingeben...",trim:""},model:{value:e.payment.billingDepartment,callback:function(t){e.$set(e.payment,"billingDepartment",t)},expression:"payment.billingDepartment"}}),n("label",{attrs:{for:"billing-gender"}},[e._v("Billing Gender")]),n("b-form-select",{attrs:{id:"billing-gender"},model:{value:e.payment.billingGender,callback:function(t){e.$set(e.payment,"billingGender",t)},expression:"payment.billingGender"}},[n("b-form-select-option",{attrs:{value:""}},[e._v("-- Anrede auswählen --")]),e._l(e.contactGenderOptions,(function(t){return n("b-form-select-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],2),n("label",{attrs:{for:"billing-title"}},[e._v("Billing Title")]),n("b-form-select",{attrs:{id:"billing-title"},model:{value:e.payment.billingTitle,callback:function(t){e.$set(e.payment,"billingTitle",t)},expression:"payment.billingTitle"}},[n("b-form-select-option",{attrs:{value:""}},[e._v("-- Titel auswählen --")]),e._l(e.contactTitleOptions,(function(t){return n("b-form-select-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],2),n("label",{attrs:{for:"firstname"}},[e._v("Billing First Name")]),n("b-form-input",{attrs:{id:"firstname",type:"text",placeholder:"First Name eingeben...",trim:"",required:""},model:{value:e.payment.billingFirstName,callback:function(t){e.$set(e.payment,"billingFirstName",t)},expression:"payment.billingFirstName"}}),n("label",{attrs:{for:"lastname"}},[e._v("Billing Last Name")]),n("b-form-input",{attrs:{id:"lastname",type:"text",placeholder:"Last Name eingeben...",trim:"",required:""},model:{value:e.payment.billingLastName,callback:function(t){e.$set(e.payment,"billingLastName",t)},expression:"payment.billingLastName"}}),n("label",{attrs:{for:"street"}},[e._v("Billing Street")]),n("b-form-input",{attrs:{id:"street",type:"text",placeholder:"Street eingeben...",trim:"",required:""},model:{value:e.payment.billingStreet,callback:function(t){e.$set(e.payment,"billingStreet",t)},expression:"payment.billingStreet"}}),n("label",{attrs:{for:"zip-code"}},[e._v("Billing Zip Code")]),n("b-form-input",{attrs:{id:"zip-code",type:"text",placeholder:"Zip Code eingeben...",trim:"",required:""},model:{value:e.payment.billingZipCode,callback:function(t){e.$set(e.payment,"billingZipCode",t)},expression:"payment.billingZipCode"}}),n("label",{attrs:{for:"location"}},[e._v("Billing Location")]),n("b-form-input",{attrs:{id:"location",type:"text",placeholder:"Location eingeben...",trim:"",required:""},model:{value:e.payment.billingLocation,callback:function(t){e.$set(e.payment,"billingLocation",t)},expression:"payment.billingLocation"}}),n("label",{attrs:{for:"paid-at"}},[e._v("Paid At")]),n("b-form-datepicker",{attrs:{id:"paid-at",placeholder:"Paid At eingeben...","value-as-date":!0},model:{value:e.paidAt,callback:function(t){e.paidAt=t},expression:"paidAt"}}),n("label",{attrs:{for:"payment-expires-at"}},[e._v("Payment Expires At")]),n("b-form-datepicker",{attrs:{id:"payment-expires-at",placeholder:"Payment Expires At eingeben...","value-as-date":!0},model:{value:e.paymentExpiresAt,callback:function(t){e.paymentExpiresAt=t},expression:"paymentExpiresAt"}}),n("div",{staticClass:"d-flex justify-content-between my-4"},[n("b-button",{attrs:{variant:"outline-danger"},on:{click:function(t){return t.preventDefault(),e.$router.go(-1)}}},[e._v(" Abbrechen ")]),n("b-button",{attrs:{variant:"success"},on:{click:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[e._v(" Speichern ")])],1)],1)],1)},o=[],r=n("1da1"),p=(n("99af"),n("96cf"),n("1ba6")),s=n("c2f1"),c=n("2b0e");c["default"].component("b-form-datepicker",s["a"]);var m={name:"PaymentForm",data:function(){return{payment:{_id:this.$route.params.paymentId,user:null,job:null,coupon:null,status:"",invoiceNo:0,invoiceDate:(new Date).getTime(),paymentType:"invoice",pricingPackage:"",amount:0,fee:0,taxes:0,billingEmail:"",billingPhone:"",billingCompany:"",billingDepartment:"",billingGender:"",billingTitle:"",billingFirstName:"",billingLastName:"",billingStreet:"",billingZipCode:"",billingLocation:"",paidAt:(new Date).setHours(0),paymentExpiresAt:(new Date).setHours(24)+864e5*this.$config.payment.minDuration},contactGenderOptions:p["d"],contactTitleOptions:p["e"]}},computed:{invoiceDate:{get:function(){return new Date(this.payment.invoiceDate)},set:function(e){this.payment.invoiceDate=new Date(e).setHours(12)}},paidAt:{get:function(){return new Date(this.payment.paidAt)},set:function(e){this.payment.paidAt=new Date(e).valueOf()}},paymentExpiresAt:{get:function(){return new Date(this.payment.paymentExpiresAt)},set:function(e){this.payment.paymentExpiresAt=new Date(e).setHours(23)}}},created:function(){"new"!=this.$route.params.paymentId&&this.getPayment(this.$route.params.paymentId)},methods:{getPayment:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.$store.dispatch("setOverlay",!0),n.prev=1,n.next=4,t.$axios.get("/graphql",{params:{query:'\n              query {\n                payment (_id: "'.concat(e,'") {\n                  _id\n                  user {\n                    _id\n                  }\n                  job {\n                    _id\n                  }\n                  status\n                  invoiceNo\n                  invoiceDate\n                  paymentType\n                  pricingPackage\n                  amount\n                  fee\n                  taxes\n                  billingEmail\n                  billingPhone\n                  billingCompany\n                  billingDepartment\n                  billingGender\n                  billingTitle\n                  billingFirstName\n                  billingLastName\n                  billingStreet\n                  billingZipCode\n                  billingLocation\n                  paidAt\n                  paymentExpiresAt\n                }\n              }\n            ')}});case 4:if(a=n.sent,!a.data.errors){n.next=7;break}throw new Error("Payment could not be loaded!");case 7:a.data.data.payment.job=a.data.data.payment.job._id,a.data.data.payment.user=a.data.data.payment.user._id,a.data.data.payment.coupon=a.data.data.payment.coupon?a.data.data.payment.coupon._id:null,t.payment=a.data.data.payment,n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](1),t.$root.$bvToast.toast(n.t0.message,{title:"Fehler beim Laden",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 16:t.$store.dispatch("setOverlay",!1);case 17:case"end":return n.stop()}}),n,null,[[1,13]])})))()},onSubmit:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setOverlay",!0),t.prev=1,n=e.payment._id&&"new"!=e.payment._id?"updatePayment":"addPayment",a="\n          mutation {\n            ".concat(n," (\n                ").concat("updatePayment"===n?'_id: "'.concat(e.payment._id,'"'):"",'\n                user: "').concat(e.payment.user,'"\n                job: "').concat(e.payment.job,'"\n                ').concat(e.payment.coupon?'coupon: "'.concat(e.payment.coupon,'"'):"",'\n                status: "').concat(e.payment.status,'"\n                invoiceNo: ').concat(e.payment.invoiceNo,"\n                invoiceDate: ").concat(e.payment.invoiceDate,'\n                paymentType: "').concat(e.payment.paymentType,'"\n                pricingPackage: "').concat(e.payment.pricingPackage,'"\n                amount: ').concat(e.payment.amount,"\n                fee: ").concat(e.payment.fee,"\n                taxes: ").concat(e.payment.taxes,'\n                billingEmail: "').concat(e.payment.billingEmail,'"\n                billingPhone: "').concat(e.payment.billingPhone,'"\n                billingCompany: "').concat(e.payment.billingCompany,'"\n                billingDepartment: "').concat(e.payment.billingDepartment,'"\n                billingGender: "').concat(e.payment.billingGender,'"\n                billingTitle: "').concat(e.payment.billingTitle,'"\n                billingFirstName: "').concat(e.payment.billingFirstName,'"\n                billingLastName: "').concat(e.payment.billingLastName,'"\n                billingStreet: "').concat(e.payment.billingStreet,'"\n                billingZipCode: "').concat(e.payment.billingZipCode,'"\n                billingLocation: "').concat(e.payment.billingLocation,'"\n                paidAt: ').concat(e.payment.paidAt,"\n                paymentExpiresAt: ").concat(e.payment.paymentExpiresAt,"\n            ) {\n                _id\n            }\n          }\n        "),t.next=6,e.$axios.post("/graphql",{query:a});case 6:if(i=t.sent,!i.data.errors){t.next=9;break}throw new Error("Error on saving payment!");case 9:e.$root.$bvToast.toast("Die Zahlung wurde erfolgreich gespeichert.",{title:"Zahlung gespeichert",variant:"success",toaster:"b-toaster-bottom-right",solid:!0}),e.$router.push("/admin/payments"),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](1),e.$root.$bvToast.toast(t.t0.message,{title:"Fehler beim Speichern",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 16:e.$store.dispatch("setOverlay",!1);case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))()}}},b=m,u=n("2877"),d=Object(u["a"])(b,l,o,!1,null,null,null),y=d.exports,g={name:"AdminEditPayment",components:{PaymentForm:y}},v=g,f=Object(u["a"])(v,a,i,!1,null,null,null);t["default"]=f.exports}}]);
//# sourceMappingURL=ad_payment-legacy.5c2cc46b.js.map