(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["company_edit"],{"1ce6":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"job-form position-relative"},[a("b-form",{attrs:{id:"company-form"}},[a("label",{attrs:{for:"company-name",required:""}},[t._v("Unternehmensname")]),a("b-form-input",{attrs:{id:"company-name",type:"text","lazy-formatter":"",formatter:t.formatter,state:t.validated?!!t.company.name:null,placeholder:"Unternehmensname eingeben...",required:"",trim:""},model:{value:t.company.name,callback:function(e){t.$set(t.company,"name",e)},expression:"company.name"}}),a("label",{attrs:{for:"company-street",required:""}},[t._v("Straße und Hausnummer")]),a("b-form-input",{attrs:{id:"company-street",type:"text","lazy-formatter":"",formatter:t.formatter,state:t.validated?!!t.company.street:null,placeholder:"Straße und Hausnummer eingeben...",required:"",trim:""},model:{value:t.company.street,callback:function(e){t.$set(t.company,"street",e)},expression:"company.street"}}),a("label",{attrs:{for:"company-zip-code",required:""}},[t._v("PLZ")]),a("b-form-input",{attrs:{id:"company-zip-code",type:"text",state:t.validated?!!t.company.zipCode:null,placeholder:"PLZ eingeben...",required:"",trim:""},model:{value:t.company.zipCode,callback:function(e){t.$set(t.company,"zipCode",e)},expression:"company.zipCode"}}),a("label",{attrs:{for:"company-location",required:""}},[t._v("Ort")]),a("b-form-input",{attrs:{id:"company-location",type:"text","lazy-formatter":"",formatter:t.formatter,state:t.validated?!!t.company.location:null,placeholder:"Ort eingeben...",required:"",trim:""},model:{value:t.company.location,callback:function(e){t.$set(t.company,"location",e)},expression:"company.location"}}),a("label",{attrs:{for:"company-country",required:""}},[t._v("Land")]),a("b-form-select",{attrs:{id:"company-country",state:t.validated?!!t.company.country:null},model:{value:t.company.country,callback:function(e){t.$set(t.company,"country",e)},expression:"company.country"}},[a("b-form-select-option",{attrs:{value:"",disabled:""}},[t._v("-- Land auswählen --")]),t._l(t.companyCountryOptions,(function(e){return a("b-form-select-option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}))],2),a("label",{attrs:{for:"company-size"}},[t._v("Unternehmensgröße")]),a("b-form-select",{attrs:{id:"company-size",state:t.validated&&!!t.company.size||null},model:{value:t.company.size,callback:function(e){t.$set(t.company,"size",e)},expression:"company.size"}},[a("b-form-select-option",{attrs:{value:""}},[t._v("-- Unternehmensgröße auswählen --")]),t._l(t.companySizeOptions,(function(e){return a("b-form-select-option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}))],2),a("label",{attrs:{for:"company-url"}},[t._v("Unternehmenswebseite")]),a("b-input-group",{scopedSlots:t._u([{key:"prepend",fn:function(){return[a("b-input-group-text",[a("svg",{staticClass:"bi bi-link-45deg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"}}),a("path",{attrs:{d:"M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"}})])])]},proxy:!0}])},[a("b-form-input",{attrs:{id:"company-url",type:"url","lazy-formatter":"",formatter:t.formatter,state:t.validated&&!!t.company.url||null,placeholder:"https://www.ihr-unternehmen.de"},model:{value:t.company.url,callback:function(e){t.$set(t.company,"url",e)},expression:"company.url"}})],1),a("label",{attrs:{for:"file"}},[t._v("Logo "),a("small",[t._v("(jpg, png | max. 5MB)")])]),a("ImageUploader",{attrs:{validated:t.validated,"image-url":t.company.logoUrl,width:200,height:200,fit:"outside"},on:{"update-url":function(e){t.company.logoUrl=e}}}),t.$store.state.auth.user.isAdmin?a("b-form-input",{staticClass:"bg-light-shade mt-2",attrs:{type:"url",placeholder:"ADMIN - URL to image (incl. https://)"},model:{value:t.company.logoUrl,callback:function(e){t.$set(t.company,"logoUrl",e)},expression:"company.logoUrl"}}):t._e(),a("div",{staticClass:"position-relative d-flex justify-content-center align-items-center bg-secondary rounded mt-2",staticStyle:{width:"55px",height:"55px"}},[t.company.logoUrl?a("b-img",{attrs:{src:t.company.logoUrl,fluid:""}}):a("svg",{staticClass:"bi bi-box p-3",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5 8 5.961 14.154 3.5 8.186 1.113zM15 4.239l-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"}})])],1),a("div",{staticClass:"d-flex justify-content-between my-4"},[a("b-button",{attrs:{variant:"outline-danger"},on:{click:function(e){return e.preventDefault(),t.$router.go(-1)}}},[t._v(" Abbrechen ")]),a("b-button",{attrs:{variant:"success"},on:{click:function(e){return e.preventDefault(),t.onSubmit(e)}}},[t._v(" Speichern ")])],1)],1),t.error?a("b-alert",{staticClass:"mt-3",attrs:{show:"",dismissible:"",variant:"danger"}},[t._v(t._s(t.error))]):t._e()],1)},n=[],i=a("67cc"),s=a("1ba6"),o=a("5641"),l={name:"CompanyForm",components:{ImageUploader:o["a"]},mixins:[i["a"]],props:{apiJobsSchema:{type:String,default:"private"}},data(){return{company:{_id:this.$route.params.companyId,name:"",street:"",location:"",zipCode:"",state:"",country:"",geoCodeLat:null,geoCodeLng:null,size:"",url:"",logoUrl:""},companyCountryOptions:s["a"],companyStateOptions:s["c"],companySizeOptions:s["b"],validated:null,success:"",error:""}},created(){"new"!=this.$route.params.companyId&&this.getCompany(this.$route.params.companyId)},methods:{async getCompany(t){try{const e=await this.$axios.get("/graphql",{params:{query:`\n                          query {\n                              company(_id: "${t}") {\n                                  _id\n                                  name\n                                  street\n                                  location\n                                  zipCode\n                                  state\n                                  country\n                                  geoCodeLat\n                                  geoCodeLng\n                                  size\n                                  url\n                                  logoUrl\n                              }\n                          }\n                      `}});this.company=e.data.data.company}catch(e){this.$root.$bvToast.toast("Beim Laden des Unternehmens ist ein Fehler aufgetreten. Bitte versuchen Sie es noch einmal, indem Sie die Seite neu laden.",{title:"Fehler beim Laden",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0})}},async onSubmit(){if(this.error=!1,!this.formValidation())return this.error="Bitte füllen Sie die erforderlichen Felder aus!",null;let t;this.$store.dispatch("setOverlay",!0),t="new"===this.company._id?"addCompany":"admin"===this.apiJobsSchema?"adminUpdateCompany":"updateCompany";const e=await this.saveCompany(t,this.company,!0);this.success=e.success,this.$store.dispatch("setOverlay",!1)},formatter(t){return t.replace('"',"'").replace("&","+")},formValidation(){return this.validated=!0,!!(this.company.name&&this.company.country&&this.company.location&&this.company.street&&this.company.zipCode)},formReset(){for(const t in this.company)this.company[t]=""},hasHistory(){return window.history.length>2}}},c=l,u=a("2877"),p=Object(u["a"])(c,r,n,!1,null,null,null);e["a"]=p.exports},5641:function(t,e,a){"use strict";var r,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex"},[a("BFormFile",{ref:"file-input",attrs:{id:t.id,state:t.validated&&!!t.file||null,accept:"image/jpeg, image/png",placeholder:"Datei wählen/ablegen...","drop-placeholder":"Datei hier ablegen...","browse-text":"Durchsuchen"},on:{input:t.uploadImage},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),a("b-button",{staticClass:"ml-2",attrs:{variant:"outline-danger"},on:{click:function(e){return e.preventDefault(),t.resetFile(e)}}},[a("svg",{staticClass:"bi bi-trash-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"}})])])],1),a("b-form-invalid-feedback",{attrs:{state:t.success}},[t._v(" Das Bild muss im Format *.jpg oder *.png hochgeladen werden und darf maximal 5MB groß sein. ")])],1)},i=[],s=a("2b0e"),o=a("c637"),l=a("e863"),c=a("0056"),u=a("a723"),p=a("9b76"),d=a("992e"),h=a("ca88"),m=a("2326"),f=a("c9a9"),y=a("906c"),b=a("6b77"),g=a("6c06"),v=a("7b1e"),w=a("3c21"),$=a("58f2"),O=a("d82f"),j=a("cf75"),C=a("fa73"),x=a("686b"),F=a("493b"),_=a("dde7"),z=a("a953"),D=a("d520"),S=a("90ef"),A=a("8c18"),U=a("ad47");function k(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function L(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?k(Object(a),!0).forEach((function(e){P(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function P(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var E=Object($["a"])("value",{type:[u["b"],h["b"]],defaultValue:null,validator:function(t){return""===t?(Object(x["a"])(H,o["B"]),!0):Object(v["p"])(t)||V(t)}}),B=E.mixin,q=E.props,I=E.prop,M=E.event,H='Setting "value"/"v-model" to an empty string for reset is deprecated. Set to "null" instead.',V=function t(e){return Object(v["e"])(e)||Object(v["a"])(e)&&e.every((function(e){return t(e)}))},T=function(t){return Object(v["f"])(t.getAsEntry)?t.getAsEntry():Object(v["f"])(t.webkitGetAsEntry)?t.webkitGetAsEntry():null},N=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Promise.all(Object(m["f"])(t).filter((function(t){return"file"===t.kind})).map((function(t){var a=T(t);if(a){if(a.isDirectory&&e)return J(a.createReader(),"".concat(a.name,"/"));if(a.isFile)return new Promise((function(t){a.file((function(e){e.$path="",t(e)}))}))}return null})).filter(g["a"]))},J=function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(r){var n=[],i=function i(){e.readEntries((function(e){0===e.length?r(Promise.all(n).then((function(t){return Object(m["d"])(t)}))):(n.push(Promise.all(e.map((function(e){if(e){if(e.isDirectory)return t(e.createReader(),"".concat(a).concat(e.name,"/"));if(e.isFile)return new Promise((function(t){e.file((function(e){e.$path="".concat(a).concat(e.name),t(e)}))}))}return null})).filter(g["a"]))),i())}))};i()}))},R=Object(j["d"])(Object(O["m"])(L(L(L(L(L(L(L({},S["b"]),q),_["b"]),z["b"]),D["b"]),U["b"]),{},{accept:Object(j["c"])(u["s"],""),browseText:Object(j["c"])(u["s"],"Browse"),capture:Object(j["c"])(u["g"],!1),directory:Object(j["c"])(u["g"],!1),dropPlaceholder:Object(j["c"])(u["s"],"Drop files here"),fileNameFormatter:Object(j["c"])(u["k"]),multiple:Object(j["c"])(u["g"],!1),noDrop:Object(j["c"])(u["g"],!1),noDropPlaceholder:Object(j["c"])(u["s"],"Not allowed"),noTraverse:Object(j["c"])(u["g"],!1),placeholder:Object(j["c"])(u["s"],"No file chosen")})),o["B"]),K=s["default"].extend({name:o["B"],mixins:[F["a"],S["a"],B,A["a"],_["a"],D["a"],z["a"],A["a"]],inheritAttrs:!1,props:R,data:function(){return{files:[],dragging:!1,dropAllowed:!this.noDrop,hasFocus:!1}},computed:{computedAccept:function(){var t=this.accept;return t=(t||"").trim().split(/[,\s]+/).filter(g["a"]),0===t.length?null:t.map((function(t){var e="name",a="^",r="$";d["i"].test(t)?a="":(e="type",d["s"].test(t)&&(r=".+$",t=t.slice(0,-1))),t=Object(C["a"])(t);var n=new RegExp("".concat(a).concat(t).concat(r));return{rx:n,prop:e}}))},computedCapture:function(){var t=this.capture;return!0===t||""===t||(t||null)},computedAttrs:function(){var t=this.name,e=this.disabled,a=this.required,r=this.form,n=this.computedCapture,i=this.accept,s=this.multiple,o=this.directory;return L(L({},this.bvAttrs),{},{type:"file",id:this.safeId(),name:t,disabled:e,required:a,form:r||null,capture:n,accept:i||null,multiple:s,directory:o,webkitdirectory:o,"aria-required":a?"true":null})},computedFileNameFormatter:function(){var t=this.fileNameFormatter;return Object(j["b"])(t)?t:this.defaultFileNameFormatter},clonedFiles:function(){return Object(f["a"])(this.files)},flattenedFiles:function(){return Object(m["e"])(this.files)},fileNames:function(){return this.flattenedFiles.map((function(t){return t.name}))},labelContent:function(){if(this.dragging&&!this.noDrop)return this.normalizeSlot(p["h"],{allowed:this.dropAllowed})||(this.dropAllowed?this.dropPlaceholder:this.$createElement("span",{staticClass:"text-danger"},this.noDropPlaceholder));if(0===this.files.length)return this.normalizeSlot(p["F"])||this.placeholder;var t=this.flattenedFiles,e=this.clonedFiles,a=this.fileNames,r=this.computedFileNameFormatter;return this.hasNormalizedSlot(p["k"])?this.normalizeSlot(p["k"],{files:t,filesTraversed:e,names:a}):r(t,e,a)}},watch:(r={},P(r,I,(function(t){(!t||Object(v["a"])(t)&&0===t.length)&&this.reset()})),P(r,"files",(function(t,e){if(!Object(w["a"])(t,e)){var a=this.multiple,r=this.noTraverse,n=!a||r?Object(m["e"])(t):t;this.$emit(M,a?n:n[0]||null)}})),r),created:function(){this.$_form=null},mounted:function(){var t=Object(y["e"])("form",this.$el);t&&(Object(b["b"])(t,"reset",this.reset,c["V"]),this.$_form=t)},beforeDestroy:function(){var t=this.$_form;t&&Object(b["a"])(t,"reset",this.reset,c["V"])},methods:{isFileValid:function(t){if(!t)return!1;var e=this.computedAccept;return!e||e.some((function(e){return e.rx.test(t[e.prop])}))},isFilesArrayValid:function(t){var e=this;return Object(v["a"])(t)?t.every((function(t){return e.isFileValid(t)})):this.isFileValid(t)},defaultFileNameFormatter:function(t,e,a){return a.join(", ")},setFiles:function(t){this.dropAllowed=!this.noDrop,this.dragging=!1,this.files=this.multiple?this.directory?t:Object(m["e"])(t):Object(m["e"])(t).slice(0,1)},setInputFiles:function(t){try{var e=new ClipboardEvent("").clipboardData||new DataTransfer;Object(m["e"])(Object(f["a"])(t)).forEach((function(t){delete t.$path,e.items.add(t)})),this.$refs.input.files=e.files}catch(a){}},reset:function(){try{var t=this.$refs.input;t.value="",t.type="",t.type="file"}catch(e){}this.files=[]},handleFiles:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var a=t.filter(this.isFilesArrayValid);a.length>0&&(this.setFiles(a),this.setInputFiles(a))}else this.setFiles(t)},focusHandler:function(t){this.plain||"focusout"===t.type?this.hasFocus=!1:this.hasFocus=!0},onChange:function(t){var e=this,a=t.type,r=t.target,n=t.dataTransfer,i=void 0===n?{}:n,s="drop"===a;this.$emit(c["d"],t);var o=Object(m["f"])(i.items||[]);if(l["e"]&&o.length>0&&!Object(v["g"])(T(o[0])))N(o,this.directory).then((function(t){return e.handleFiles(t,s)}));else{var u=Object(m["f"])(r.files||i.files||[]).map((function(t){return t.$path=t.webkitRelativePath||"",t}));this.handleFiles(u,s)}},onDragenter:function(t){Object(b["f"])(t),this.dragging=!0;var e=t.dataTransfer,a=void 0===e?{}:e;if(this.noDrop||this.disabled||!this.dropAllowed)return a.dropEffect="none",void(this.dropAllowed=!1);a.dropEffect="copy"},onDragover:function(t){Object(b["f"])(t),this.dragging=!0;var e=t.dataTransfer,a=void 0===e?{}:e;if(this.noDrop||this.disabled||!this.dropAllowed)return a.dropEffect="none",void(this.dropAllowed=!1);a.dropEffect="copy"},onDragleave:function(t){var e=this;Object(b["f"])(t),this.$nextTick((function(){e.dragging=!1,e.dropAllowed=!e.noDrop}))},onDrop:function(t){var e=this;Object(b["f"])(t),this.dragging=!1,this.noDrop||this.disabled||!this.dropAllowed?this.$nextTick((function(){e.dropAllowed=!e.noDrop})):this.onChange(t)}},render:function(t){var e=this.custom,a=this.plain,r=this.size,n=this.dragging,i=this.stateClass,s=this.bvAttrs,o=t("input",{class:[{"form-control-file":a,"custom-file-input":e,focus:e&&this.hasFocus},i],style:e?{zIndex:-5}:{},attrs:this.computedAttrs,on:{change:this.onChange,focusin:this.focusHandler,focusout:this.focusHandler,reset:this.reset},ref:"input"});if(a)return o;var l=t("label",{staticClass:"custom-file-label",class:{dragging:n},attrs:{for:this.safeId(),"data-browse":this.browseText||null}},[t("span",{staticClass:"d-block form-file-text",style:{pointerEvents:"none"}},[this.labelContent])]);return t("div",{staticClass:"custom-file b-form-file",class:[P({},"b-custom-control-".concat(r),r),i,s.class],style:s.style,attrs:{id:this.safeId("_BV_file_outer_")},on:{dragenter:this.onDragenter,dragover:this.onDragover,dragleave:this.onDragleave,drop:this.onDrop}},[o,l])}});s["default"].component("BFormFile",K);var G={name:"ImageUploader",props:{id:{type:String,default:""},validated:{type:Boolean},imageUrl:{type:String,default:""},width:{type:Number,default:0},height:{type:Number,default:0},fit:{type:String,default:"outside"}},data(){return{file:null,success:null}},methods:{async uploadImage(t){if(this.success=null,t){this.$store.dispatch("setOverlay",!0);try{this.imageUrl&&this.deleteImage();const e=new FormData;e.append("file",t),e.append("width",this.width),e.append("height",this.height),e.append("fit",this.fit);const a=await this.$axios.post("/api/images/upload",e);a.data.success?this.$emit("update-url",a.data.url):(this.success=!1,this.$emit("update-url",""))}catch(e){this.$root.$bvToast.toast("Das Bild konnte nicht gespeichert werden.",{title:"Fehler beim Speichern",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!1})}this.$store.dispatch("setOverlay",!1)}},async deleteImage(){this.$store.dispatch("setOverlay",!0);try{await this.$axios.post("/api/images/delete",{imageUrl:this.imageUrl})}catch(t){}this.$store.dispatch("setOverlay",!1)},resetFile(){this.$store.dispatch("setOverlay",!0),this.imageUrl&&this.deleteImage(),this.$refs["file-input"].reset(),this.$emit("update-url",""),this.$store.dispatch("setOverlay",!1)}}},Z=G,W=a("2877"),Y=Object(W["a"])(Z,n,i,!1,null,null,null);e["a"]=Y.exports},"67cc":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));const r={data(){return{hereMaps:{apiKey:"n3GOlcV0Z6utqCKpJlDWH6lWYtJdvR0QomMzYs_EreM",platform:null,service:null}}},async created(){try{await this.$loadScript("https://js.api.here.com/v3/3.1/mapsjs-core.js"),await Promise.all([this.$loadScript("https://js.api.here.com/v3/3.1/mapsjs-service.js")]),this.initPlatform()}catch(t){}},methods:{async initPlatform(){this.hereMaps.platform=new window.H.service.Platform({apikey:this.hereMaps.apiKey}),this.hereMaps.service=this.hereMaps.platform.getSearchService()},async getHereLocation(t){let e={};try{const a=await this.hereMaps.service.geocode({q:t});e=a.items[0]}catch(a){}finally{return e}},async getHereLocationSuggestions(t,e=5,a="city"){let r=[];try{const n=await this.$axios.get("https://autocomplete.geocoder.ls.hereapi.com/6.2/suggest.json?\n        ",{params:{query:t,maxresults:e,country:"DEU",language:"de",resultType:a,apiKey:this.hereMaps.apiKey}});r=n.data.suggestions}catch(n){}finally{return r}}}},n={mixins:[r],methods:{async saveCompany(t,e,a=!1){try{const r=await this.getHereLocation(`${e.street} ${e.location} ${e.zipCode} ${e.country}`);e.geoCodeLat=r.position&&r.position.lat?r.position.lat:this.$config.maps.defaultCenter.lat,e.geoCodeLng=r.position&&r.position.lng?r.position.lng:this.$config.maps.defaultCenter.lng,e.state=r.address&&r.address.state?r.address.state:"";const n=`\n          mutation {\n            ${t}(\n              ${"updateCompany"===t||"adminUpdateCompany"===t?`_id: "${e._id}",`:""} \n              name: "${e.name}", \n              street: "${e.street}"\n              location: "${e.location}", \n              zipCode: "${e.zipCode}"\n              state: "${e.state}", \n              country: "${e.country}", \n              geoCodeLat: ${e.geoCodeLat}, \n              geoCodeLng: ${e.geoCodeLng}, \n              size: "${e.size}"\n              url: "${!/^https?:\/\//i.test(e.url)&&e.url?"https://"+e.url:e.url}"\n              logoUrl: "${e.logoUrl}"\n            ) {\n              _id\n            }\n          }\n      `,i=await this.$axios.post("/graphql",{query:n});return i.data.data[t]._id?(this.$root.$bvToast.toast("Das Unternehmen wurde erfolgreich gespeichert.",{title:"Unternehmen gespeichert",variant:"success",toaster:"b-toaster-bottom-right",solid:!0}),a&&(this.hasHistory&&"admin"===this.apiJobsSchema?this.$router.go(-1):this.$router.push("/user/dashboard?tab=2")),{success:!0,companyId:i.data.data[t]._id}):(this.error="Oh, da ist leider etwas schief gelaufen. Bitte versuchen Sie es noch einmal.",{success:!1})}catch(r){return this.$root.$bvToast.toast("Beim Speichern des Unternehmens ist ein Fehler aufgetreten. Bitte versuchen Sie es noch einmal.",{title:"Fehler beim Speichern",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0}),{success:!1}}}}}},"9ddf":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-company container py-5"},[a("h2",[t._v(" Unternehmen "+t._s("new"===t.$route.params.companyId?"erstellen":"bearbeiten")+" ")]),a("CompanyForm",{attrs:{"api-jobs-schema":"private"}})],1)},n=[],i=a("1ce6"),s={name:"UserDashboardEditCompany",components:{CompanyForm:i["a"]}},o=s,l=a("2877"),c=Object(l["a"])(o,r,n,!1,null,null,null);e["default"]=c.exports},da34:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-company container py-5"},[a("h2",[t._v("Unternehmen bearbeiten")]),a("CompanyForm",{attrs:{"api-jobs-schema":"admin"}})],1)},n=[],i=a("1ce6"),s={name:"AdminEditCompany",components:{CompanyForm:i["a"]}},o=s,l=a("2877"),c=Object(l["a"])(o,r,n,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=company_edit.f39cf66d.js.map