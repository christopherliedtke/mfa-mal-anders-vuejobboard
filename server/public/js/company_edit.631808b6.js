(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["company_edit"],{"14c3":function(e,t,n){var r=n("c6b6"),a=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var o=n.call(e,t);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},"1ce6":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"job-form position-relative"},[n("b-form",{attrs:{id:"company-form"}},[n("label",{attrs:{for:"company-name",required:""}},[e._v("Unternehmensname")]),n("b-form-input",{attrs:{id:"company-name",type:"text","lazy-formatter":"",formatter:e.formatter,state:e.validated?!!e.company.name:null,placeholder:"Unternehmensname eingeben...",required:"",trim:""},model:{value:e.company.name,callback:function(t){e.$set(e.company,"name",t)},expression:"company.name"}}),n("label",{attrs:{for:"company-street",required:""}},[e._v("Straße und Hausnummer")]),n("b-form-input",{attrs:{id:"company-street",type:"text","lazy-formatter":"",formatter:e.formatter,state:e.validated?!!e.company.street:null,placeholder:"Straße und Hausnummer eingeben...",required:"",trim:""},model:{value:e.company.street,callback:function(t){e.$set(e.company,"street",t)},expression:"company.street"}}),n("label",{attrs:{for:"company-zip-code",required:""}},[e._v("PLZ")]),n("b-form-input",{attrs:{id:"company-zip-code",type:"text",state:e.validated?!!e.company.zipCode:null,placeholder:"PLZ eingeben...",required:"",trim:""},model:{value:e.company.zipCode,callback:function(t){e.$set(e.company,"zipCode",t)},expression:"company.zipCode"}}),n("label",{attrs:{for:"company-location",required:""}},[e._v("Ort")]),n("b-form-input",{attrs:{id:"company-location",type:"text","lazy-formatter":"",formatter:e.formatter,state:e.validated?!!e.company.location:null,placeholder:"Ort eingeben...",required:"",trim:""},model:{value:e.company.location,callback:function(t){e.$set(e.company,"location",t)},expression:"company.location"}}),n("label",{attrs:{for:"company-country",required:""}},[e._v("Land")]),n("b-form-select",{attrs:{id:"company-country",state:e.validated?!!e.company.country:null},model:{value:e.company.country,callback:function(t){e.$set(e.company,"country",t)},expression:"company.country"}},[n("b-form-select-option",{attrs:{value:"",disabled:""}},[e._v("-- Land auswählen --")]),e._l(e.companyCountryOptions,(function(t){return n("b-form-select-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],2),n("label",{attrs:{for:"company-size"}},[e._v("Unternehmensgröße")]),n("b-form-select",{attrs:{id:"company-size",state:e.validated&&!!e.company.size||null},model:{value:e.company.size,callback:function(t){e.$set(e.company,"size",t)},expression:"company.size"}},[n("b-form-select-option",{attrs:{value:""}},[e._v("-- Unternehmensgröße auswählen --")]),e._l(e.companySizeOptions,(function(t){return n("b-form-select-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],2),n("label",{attrs:{for:"company-url"}},[e._v("Unternehmenswebseite")]),n("b-input-group",{scopedSlots:e._u([{key:"prepend",fn:function(){return[n("b-input-group-text",[n("Fa",{attrs:{icon:"link"}})],1)]},proxy:!0}])},[n("b-form-input",{attrs:{id:"company-url",type:"url","lazy-formatter":"",formatter:e.formatter,state:e.validated&&!!e.company.url||null,placeholder:"https://www.ihr-unternehmen.de"},model:{value:e.company.url,callback:function(t){e.$set(e.company,"url",t)},expression:"company.url"}})],1),n("label",{attrs:{for:"file"}},[e._v("Logo "),n("small",[e._v("(jpg, png | max. 5MB)")])]),n("ImageUploader",{attrs:{validated:e.validated,"image-url":e.company.logoUrl,width:200,height:200,fit:"outside"},on:{"update-url":function(t){e.company.logoUrl=t}}}),e.$store.state.auth.user.isAdmin?n("b-form-input",{staticClass:"bg-light-shade mt-2",attrs:{type:"url",placeholder:"ADMIN - URL to image (incl. https://)"},model:{value:e.company.logoUrl,callback:function(t){e.$set(e.company,"logoUrl",t)},expression:"company.logoUrl"}}):e._e(),n("div",{staticClass:"position-relative d-flex justify-content-center align-items-center bg-secondary rounded mt-2",staticStyle:{width:"55px",height:"55px"}},[e.company.logoUrl?n("b-img",{attrs:{src:e.company.logoUrl,fluid:""}}):n("Fa",{attrs:{icon:"box-open",size:"lg"}})],1),n("div",{staticClass:"d-flex justify-content-between my-4"},[n("b-button",{attrs:{variant:"outline-danger"},on:{click:function(t){return t.preventDefault(),e.$router.go(-1)}}},[e._v(" Abbrechen ")]),n("b-button",{attrs:{variant:"success"},on:{click:function(t){return t.preventDefault(),e.onSubmit(t)}}},[e.success?n("Fa",{staticClass:"mr-2",attrs:{icon:"check"}}):e._e(),e._v(" "+e._s(e.success?"Gespeichert":"Speichern")+" ")],1)],1)],1),e.error?n("b-alert",{staticClass:"mt-3",attrs:{show:"",dismissible:"",variant:"danger"}},[e._v(e._s(e.error))]):e._e()],1)},a=[],o=(n("b0c0"),n("ac1f"),n("5319"),n("96cf"),n("c964")),c=n("67cc"),i=n("1ba6"),s=n("5641"),l={name:"CompanyForm",components:{ImageUploader:s["a"]},mixins:[c["a"]],props:{apiJobsSchema:{type:String,default:"private"}},data:function(){return{company:{_id:this.$route.params.companyId,name:"",street:"",location:"",zipCode:"",state:"",country:"",geoCodeLat:null,geoCodeLng:null,size:"",url:"",logoUrl:""},companyCountryOptions:i["a"],companyStateOptions:i["c"],companySizeOptions:i["b"],validated:null,success:"",error:""}},created:function(){"new"!=this.$route.params.companyId&&this.getCompany(this.$route.params.companyId)},methods:{getCompany:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.get("/graphql",{params:{query:'\n                          query {\n                              company(_id: "'.concat(e,'") {\n                                  _id\n                                  name\n                                  street\n                                  location\n                                  zipCode\n                                  state\n                                  country\n                                  geoCodeLat\n                                  geoCodeLng\n                                  size\n                                  url\n                                  logoUrl\n                              }\n                          }\n                      ')}});case 3:r=n.sent,t.company=r.data.data.company,n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),t.$root.$bvToast.toast("Beim Laden des Unternehmens ist ein Fehler aufgetreten. Bitte versuchen Sie es noch einmal, indem Sie die Seite neu laden.",{title:"Fehler beim Laden",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},onSubmit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.error=!1,e.formValidation()){t.next=4;break}return e.error="Bitte füllen Sie die erforderlichen Felder aus!",t.abrupt("return",null);case 4:return e.$store.dispatch("setOverlay",!0),n="new"===e.company._id?"addCompany":"admin"===e.apiJobsSchema?"adminUpdateCompany":"updateCompany",t.next=8,e.saveCompany(n,e.company,!0);case 8:r=t.sent,e.success=r.success,e.$store.dispatch("setOverlay",!1);case 11:case"end":return t.stop()}}),t)})))()},formatter:function(e){return e.replace('"',"'").replace("&","+")},formValidation:function(){return this.validated=!0,!!(this.company.name&&this.company.country&&this.company.location&&this.company.street&&this.company.zipCode)},formReset:function(){for(var e in this.company)this.company[e]=""},hasHistory:function(){return window.history.length>2}}},u=l,p=n("2877"),m=Object(p["a"])(u,r,a,!1,null,null,null);t["a"]=m.exports},5319:function(e,t,n){"use strict";var r=n("d784"),a=n("825a"),o=n("7b0b"),c=n("50c4"),i=n("a691"),s=n("1d80"),l=n("8aa5"),u=n("14c3"),p=Math.max,m=Math.min,d=Math.floor,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,h=/\$([$&'`]|\d\d?)/g,v=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,n,r){var y=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=r.REPLACE_KEEPS_$0,b=y?"$":"$0";return[function(n,r){var a=s(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,a,r):t.call(String(a),n,r)},function(e,r){if(!y&&g||"string"===typeof r&&-1===r.indexOf(b)){var o=n(t,e,this,r);if(o.done)return o.value}var s=a(e),d=String(this),f="function"===typeof r;f||(r=String(r));var h=s.global;if(h){var _=s.unicode;s.lastIndex=0}var C=[];while(1){var w=u(s,d);if(null===w)break;if(C.push(w),!h)break;var E=String(w[0]);""===E&&(s.lastIndex=l(d,c(s.lastIndex),_))}for(var $="",S=0,R=0;R<C.length;R++){w=C[R];for(var U=String(w[0]),k=p(m(i(w.index),d.length),0),z=[],O=1;O<w.length;O++)z.push(v(w[O]));var I=w.groups;if(f){var j=[U].concat(z,k,d);void 0!==I&&j.push(I);var L=String(r.apply(void 0,j))}else L=x(U,d,k,z,I,r);k>=S&&($+=d.slice(S,k)+L,S=k+U.length)}return $+d.slice(S)}];function x(e,n,r,a,c,i){var s=r+e.length,l=a.length,u=h;return void 0!==c&&(c=o(c),u=f),t.call(i,u,(function(t,o){var i;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(s);case"<":i=c[o.slice(1,-1)];break;default:var u=+o;if(0===u)return t;if(u>l){var p=d(u/10);return 0===p?t:p<=l?void 0===a[p-1]?o.charAt(1):a[p-1]+o.charAt(1):t}i=a[u-1]}return void 0===i?"":i}))}}))},"67cc":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("99af"),n("b0c0"),n("96cf");var r=n("c964"),a=(n("d3b7"),n("3ca3"),n("ddb0"),{data:function(){return{hereMaps:{apiKey:"n3GOlcV0Z6utqCKpJlDWH6lWYtJdvR0QomMzYs_EreM",platform:null,service:null}}},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$loadScript("https://js.api.here.com/v3/3.1/mapsjs-core.js");case 3:return t.next=5,Promise.all([e.$loadScript("https://js.api.here.com/v3/3.1/mapsjs-service.js")]);case 5:e.initPlatform(),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()},methods:{initPlatform:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.hereMaps.platform=new window.H.service.Platform({apikey:e.hereMaps.apiKey}),e.hereMaps.service=e.hereMaps.platform.getSearchService();case 2:case"end":return t.stop()}}),t)})))()},getHereLocation:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r={},n.prev=1,n.next=4,t.hereMaps.service.geocode({q:e});case 4:a=n.sent,r=a.items[0],n.next=10;break;case 8:n.prev=8,n.t0=n["catch"](1);case 10:return n.prev=10,n.abrupt("return",r);case 13:case"end":return n.stop()}}),n,null,[[1,8,10,13]])})))()},getHereLocationSuggestions:function(e){var t=arguments,n=this;return Object(r["a"])(regeneratorRuntime.mark((function r(){var a,o,c,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.length>1&&void 0!==t[1]?t[1]:5,o=t.length>2&&void 0!==t[2]?t[2]:"city",c=[],r.prev=3,r.next=6,n.$axios.get("https://autocomplete.geocoder.ls.hereapi.com/6.2/suggest.json?\n        ",{params:{query:e,maxresults:a,country:"DEU",language:"de",resultType:o,apiKey:n.hereMaps.apiKey}});case 6:i=r.sent,c=i.data.suggestions,r.next=12;break;case 10:r.prev=10,r.t0=r["catch"](3);case 12:return r.prev=12,r.abrupt("return",c);case 15:case"end":return r.stop()}}),r,null,[[3,10,12,15]])})))()}}}),o={mixins:[a],methods:{saveCompany:function(e,t){var n=arguments,a=this;return Object(r["a"])(regeneratorRuntime.mark((function r(){var o,c,i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=n.length>2&&void 0!==n[2]&&n[2],r.prev=1,r.next=4,a.getHereLocation("".concat(t.street," ").concat(t.location," ").concat(t.zipCode," ").concat(t.country));case 4:return c=r.sent,t.geoCodeLat=c.position&&c.position.lat?c.position.lat:a.$config.maps.defaultCenter.lat,t.geoCodeLng=c.position&&c.position.lng?c.position.lng:a.$config.maps.defaultCenter.lng,t.state=c.address&&c.address.state?c.address.state:"",i="\n          mutation {\n            ".concat(e,"(\n              ").concat("updateCompany"===e||"adminUpdateCompany"===e?'_id: "'.concat(t._id,'",'):"",' \n              name: "').concat(t.name,'", \n              street: "').concat(t.street,'"\n              location: "').concat(t.location,'", \n              zipCode: "').concat(t.zipCode,'"\n              state: "').concat(t.state,'", \n              country: "').concat(t.country,'", \n              geoCodeLat: ').concat(t.geoCodeLat,", \n              geoCodeLng: ").concat(t.geoCodeLng,', \n              size: "').concat(t.size,'"\n              url: "').concat(!/^https?:\/\//i.test(t.url)&&t.url?"https://"+t.url:t.url,'"\n              logoUrl: "').concat(t.logoUrl,'"\n            ) {\n              _id\n            }\n          }\n      '),r.next=11,a.$axios.post("/graphql",{query:i});case 11:if(s=r.sent,s.data.data[e]._id){r.next=17;break}return a.error="Oh, da ist leider etwas schief gelaufen. Bitte versuchen Sie es noch einmal.",r.abrupt("return",{success:!1});case 17:return a.$root.$bvToast.toast("Das Unternehmen wurde erfolgreich gespeichert.",{title:"Unternehmen gespeichert",variant:"success",toaster:"b-toaster-bottom-right",solid:!0}),o&&(a.hasHistory&&"admin"===a.apiJobsSchema?a.$router.go(-1):a.$router.push("/user/dashboard?tab=2")),r.abrupt("return",{success:!0,companyId:s.data.data[e]._id});case 20:r.next=26;break;case 22:return r.prev=22,r.t0=r["catch"](1),a.$root.$bvToast.toast("Beim Speichern des Unternehmens ist ein Fehler aufgetreten. Bitte versuchen Sie es noch einmal.",{title:"Fehler beim Speichern",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0}),r.abrupt("return",{success:!1});case 26:case"end":return r.stop()}}),r,null,[[1,22]])})))()}}}},"8aa5":function(e,t,n){"use strict";var r=n("6547").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},9263:function(e,t,n){"use strict";var r=n("ad6d"),a=n("9f7f"),o=RegExp.prototype.exec,c=String.prototype.replace,i=o,s=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),l=a.UNSUPPORTED_Y||a.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],p=s||u||l;p&&(i=function(e){var t,n,a,i,p=this,m=l&&p.sticky,d=r.call(p),f=p.source,h=0,v=e;return m&&(d=d.replace("y",""),-1===d.indexOf("g")&&(d+="g"),v=String(e).slice(p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==e[p.lastIndex-1])&&(f="(?: "+f+")",v=" "+v,h++),n=new RegExp("^(?:"+f+")",d)),u&&(n=new RegExp("^"+f+"$(?!\\s)",d)),s&&(t=p.lastIndex),a=o.call(m?n:p,v),m?a?(a.input=a.input.slice(h),a[0]=a[0].slice(h),a.index=p.lastIndex,p.lastIndex+=a[0].length):p.lastIndex=0:s&&a&&(p.lastIndex=p.global?a.index+a[0].length:t),u&&a&&a.length>1&&c.call(a[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(a[i]=void 0)})),a}),e.exports=i},"9ddf":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"edit-company py-5"},[n("h2",[e._v(" Unternehmen "+e._s("new"===e.$route.params.companyId?"erstellen":"bearbeiten")+" ")]),n("CompanyForm",{attrs:{"api-jobs-schema":"private"}})],1)},a=[],o=n("1ce6"),c={name:"UserDashboardEditCompany",components:{CompanyForm:o["a"]}},i=c,s=n("2877"),l=Object(s["a"])(i,r,a,!1,null,null,null);t["default"]=l.exports},"9f7f":function(e,t,n){"use strict";var r=n("d039");function a(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac1f:function(e,t,n){"use strict";var r=n("23e7"),a=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},d784:function(e,t,n){"use strict";n("ac1f");var r=n("6eeb"),a=n("d039"),o=n("b622"),c=n("9263"),i=n("9112"),s=o("species"),l=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),p=o("replace"),m=function(){return!!/./[p]&&""===/./[p]("a","$0")}(),d=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,p){var f=o(e),h=!a((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),v=h&&!a((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[s]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return t=!0,null},n[f](""),!t}));if(!h||!v||"replace"===e&&(!l||!u||m)||"split"===e&&!d){var y=/./[f],g=n(f,""[e],(function(e,t,n,r,a){return t.exec===c?h&&!a?{done:!0,value:y.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}),b=g[0],x=g[1];r(String.prototype,e,b),r(RegExp.prototype,f,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}p&&i(RegExp.prototype[f],"sham",!0)}},da34:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"edit-company py-5"},[n("h2",[e._v("Unternehmen bearbeiten")]),n("CompanyForm",{attrs:{"api-jobs-schema":"admin"}})],1)},a=[],o=n("1ce6"),c={name:"AdminEditCompany",components:{CompanyForm:o["a"]}},i=c,s=n("2877"),l=Object(s["a"])(i,r,a,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=company_edit.631808b6.js.map