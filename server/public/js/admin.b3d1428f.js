(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{"0f1a":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"edit-job py-5"},[n("h2",[e._v("Stellenanzeige bearbeiten")]),n("JobForm",{attrs:{apiJobsSchema:"admin"}})],1)},a=[],o=n("13e7"),s={name:"AdminEditJob",components:{JobForm:o["a"]}},i=s,c=n("2877"),l=Object(c["a"])(i,r,a,!1,null,null,null);t["default"]=l.exports},2953:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")},a=[],o={name:"Admin"},s=o,i=n("2877"),c=Object(i["a"])(s,r,a,!1,null,null,null);t["default"]=c.exports},"49b3":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"edit-job py-5"},[n("h2",[e._v("Nutzer bearbeiten")]),n("AccountDataForm",{attrs:{apiUsersSchema:"admin"}})],1)},a=[],o=n("986e"),s={name:"AdminEditUser",components:{AccountDataForm:o["a"]}},i=s,c=n("2877"),l=Object(c["a"])(i,r,a,!1,null,null,null);t["default"]=l.exports},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),a=n("5899"),o="["+a+"]",s=RegExp("^"+o+o+"*"),i=RegExp(o+o+"*$"),c=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(s,"")),2&e&&(n=n.replace(i,"")),n}};e.exports={start:c(1),end:c(2),trim:c(3)}},6966:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"dashboard py-5 px-3 px-md-5",attrs:{fluid:""}},[n("h2",[e._v("Admin")]),n("b-tabs",{attrs:{"content-class":"mt-3",value:e.query.tab}},[n("b-tab",{attrs:{title:"Jobs"},on:{click:function(t){return e.setQuery("tab",0)}}},[n("AllJobsListAdmin")],1),n("b-tab",{attrs:{title:"Companies"},on:{click:function(t){return e.setQuery("tab",1)}}},[n("AllCompaniesListAdmin")],1),n("b-tab",{attrs:{title:"Users"},on:{click:function(t){return e.setQuery("tab",2)}}},[n("AllUsersListAdmin")],1),n("b-tab",{attrs:{title:"Coupons"},on:{click:function(t){return e.setQuery("tab",3)}}},[n("AllCouponsListAdmin")],1),n("b-tab",{attrs:{title:"Subscribers"},on:{click:function(t){return e.setQuery("tab",4)}}},[n("AllSubscribersListAdmin")],1),n("b-tab",{attrs:{title:"Data Analytics"},on:{click:function(t){return e.setQuery("tab",5)}}})],1),n("Head",{attrs:{title:"Admin",desc:"",img:""}})],1)},a=[],o=n("ade3"),s=n("5530"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-form",{attrs:{id:"job-filter",inline:""},on:{submit:function(e){e.preventDefault()}}},[n("b-input-group",{staticClass:"my-2 mr-2"},[n("b-form-input",{attrs:{type:"text",placeholder:"Enter search term ..."},model:{value:e.filter.searchTerm,callback:function(t){e.$set(e.filter,"searchTerm",t)},expression:"filter.searchTerm"}}),n("b-input-group-append",[n("b-button",[n("Fa",{attrs:{icon:"times"},on:{click:function(t){t.preventDefault(),e.filter.searchTerm=""}}})],1)],1)],1),n("div",{staticClass:"inline-block ml-3 my-3 my-lg-0"},[e._v(" Number of Jobs: "),n("strong",[e._v(e._s(e.computedJobs.length))])])],1),n("b-table",{attrs:{responsive:"",striped:"",hover:"","sticky-header":"80vh","tbody-tr-class":e.rowClass,items:e.computedJobs,fields:e.fields,"primary-key":"_id"},scopedSlots:e._u([{key:"cell(user)",fn:function(t){return[e._v(" "+e._s(t.item.userId.lastName+", "+t.item.userId.firstName)+" "),n("a",{attrs:{href:"mailto:"+t.item.userId.email}},[e._v(" "+e._s(t.item.userId.email))])]}},{key:"cell(createdAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(updatedAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(paidAt)",fn:function(t){return[e._v(" "+e._s(t.value&&new Date(t.value).toLocaleString())+" ")]}},{key:"cell(applicationDeadline)",fn:function(t){return[e._v(" "+e._s(t.value&&new Date(t.value).toLocaleString())+" ")]}},{key:"cell(paidExpiresAt)",fn:function(t){return[e._v(" "+e._s(t.value&&new Date(t.value).toLocaleString())+" ")]}},{key:"cell(paidAmount)",fn:function(t){return[e._v(" "+e._s(t.value/100)+"€ ")]}},{key:"cell(location)",fn:function(t){return[e._v(" "+e._s(t.item.company.street+" "+t.item.company.location+" "+t.item.company.zipCode+" "+t.item.company.state+" "+t.item.company.country)+" ")]}},{key:"cell(actions)",fn:function(t){return[n("b-button",{staticClass:"mr-2 mb-2",attrs:{to:"/admin/jobs/edit/"+t.item._id,variant:"primary",size:"sm"}},[n("Fa",{attrs:{icon:"edit"}})],1),n("b-button",{staticClass:"mr-2 mb-2",attrs:{to:"/admin/jobs/preview/"+t.item._id,variant:"info",size:"sm"}},[n("Fa",{attrs:{scale:"1",icon:"eye"}})],1),n("b-dropdown",{staticClass:"mr-2 mb-2",attrs:{size:"sm",left:"",variant:"secondary"},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("Fa",{staticClass:"mr-2",attrs:{icon:"ellipsis-v"}}),e._v(" Status ")]},proxy:!0}],null,!0)},[n("b-dropdown-item",{attrs:{active:"draft"===t.item.status,variant:"secondary"},on:{click:function(n){return n.preventDefault(),e.updateJob(t.item._id,"status","draft")}}},[e._v("Draft")]),n("b-dropdown-item",{attrs:{active:"invoice-pending"===t.item.status,variant:"secondary"},on:{click:function(n){return n.preventDefault(),e.updateJob(t.item._id,"status","invoice-pending")}}},[e._v("Invoice pending")]),n("b-dropdown-item",{attrs:{active:"published"===t.item.status,variant:"success"},on:{click:function(n){return n.preventDefault(),e.updateJob(t.item._id,"status","published")}}},[e._v("Published")]),n("b-dropdown-item",{attrs:{active:"unpublished"===t.item.status,variant:"danger"},on:{click:function(n){return n.preventDefault(),e.updateJob(t.item._id,"status","unpublished")}}},[e._v("Unpublished")])],1),n("b-dropdown",{staticClass:"mr-2 mb-2",attrs:{size:"sm",left:"",variant:"secondary"},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("Fa",{staticClass:"mr-2",attrs:{icon:"credit-card"}}),e._v(" Paid Status ")]},proxy:!0}],null,!0)},[n("b-dropdown-item",{attrs:{active:!1===t.item.paid,variant:"danger"},on:{click:function(n){return n.preventDefault(),e.updateJob(t.item._id,"paid",!1)}}},[e._v("Unpaid")]),n("b-dropdown-item",{attrs:{active:!0===t.item.paid,variant:"success"},on:{click:function(n){return n.preventDefault(),e.updateJob(t.item._id,"paid",!0)}}},[e._v("Paid")])],1),n("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(n){return e.showDeleteJobModal(t.item)}}},[n("Fa",{staticClass:"mr-2",attrs:{icon:"trash-alt"}}),e._v("Delete ")],1)]}}])}),n("b-modal",{attrs:{id:"deleteJobModal",title:"Delete "+e.jobToDelete.title,"ok-title":"Delete Job",centered:"","ok-variant":"danger","footer-class":"d-flex justify-content-between"},on:{ok:function(t){return e.deleteJob(e.jobToDelete._id)}}},[n("p",{staticClass:"my-4"},[e._v(" Are you sure to delete this job? ")])]),n("b-alert",{staticClass:"position-fixed fixed-bottom m-0 rounded-0",staticStyle:{"z-index":"2000"},attrs:{variant:"warning",dismissible:""},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(" Oh, something went wrong. Please try again later. ")])],1)},c=[],l=(n("99af"),n("4de4"),n("4160"),n("caad"),n("d81d"),n("a434"),n("b0c0"),n("2532"),n("159b"),n("96cf"),n("1da1")),u=n("2909"),d={name:"AllJobsListAdmin",data:function(){return{jobs:[],jobToDelete:Object,error:!1,filter:{searchTerm:""},fields:[{key:"_id",label:"Job ID",sortable:!1},{key:"title",sortable:!0},{key:"createdAt",sortable:!0},{key:"updatedAt",sortable:!0},{key:"status",sortable:!0},{key:"paid",sortable:!0},{key:"paidAt",sortable:!0},{key:"paidExpiresAt",sortable:!0},{key:"paidAmount",sortable:!0},{key:"sentReminder",sortable:!0},{key:"refreshFrequency",sortable:!0},{key:"applicationDeadline",sortable:!0},{key:"company.name",label:"Company",sortable:!0},{key:"location",sortable:!0},{key:"userId._id",label:"User ID",sortable:!1},{key:"user",sortable:!0},{key:"actions",sortable:!1}]}},computed:{computedJobs:function(){var e=this,t=Object(u["a"])(this.jobs);return this.filter.searchTerm&&(t=t.filter((function(t){return e.checkForSearchTerm([t._id,t.title,t.company.name,t.company.street,t.company.location,t.company.zipCode,t.company.state,t.company.country,t.userId._id,t.userId.lastName,t.userId.firstName,t.userId.email],e.filter.searchTerm)?t:void 0}))),t}},created:function(){this.getAllJobs()},methods:{checkForSearchTerm:function(e,t){var n=!1;return e.forEach((function(e){e&&e.toLowerCase().includes(t.toLowerCase())&&(n=!0)})),n},getAllJobs:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("/api/jobs/admin",{query:"\n                        query {\n                            jobs {\n                                _id\n                                createdAt\n                                updatedAt\n                                paidAt\n                                paidExpiresAt\n                                paidAmount\n                                refreshFrequency\n                                status\n                                applicationDeadline\n                                paid\n                                paidAt\n                                paidExpiresAt\n                                sentReminder\n                                title\n                                company {\n                                    name\n                                    street\n                                    location\n                                    state\n                                    zipCode\n                                    country\n                                }\n                                userId {\n                                    _id\n                                    createdAt\n                                    firstName\n                                    lastName\n                                    email\n                                }\n                            }\n                        }\n                    "});case 3:n=t.sent,e.jobs=n.data.data.jobs,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=!0,e.$root.$bvToast.toast("Jobs konnten nicht geladen werden. Error: ".concat(t.t0),{title:"Fehler beim Laden",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},updateJob:function(e,t,n){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.$axios.post("/api/jobs/admin",{query:'\n                        mutation {\n                            updateJob (_id: "'.concat(e,'", ').concat(t,": ").concat("string"===typeof n?'"'.concat(n,'"'):n,") {\n                                _id\n                                createdAt\n                                updatedAt\n                                paidAt\n                                paidExpiresAt\n                                status\n                                applicationDeadline\n                                paid\n                                paidAt\n                                paidExpiresAt\n                                title\n                                company {\n                                    name\n                                    street\n                                    location\n                                    state\n                                    zipCode\n                                    country\n                                }\n                                userId {\n                                    _id\n                                    createdAt\n                                    firstName\n                                    lastName\n                                    email\n                                }\n                            }\n                        }\n                    ")});case 3:o=a.sent,o.data.data.updateJob._id&&(r.jobs=r.jobs.map((function(e){return e._id===o.data.data.updateJob._id?o.data.data.updateJob:e}))),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),r.$root.$bvToast.toast("Der Job konnte nicht gespeichert werden. Error: ".concat(a.t0),{title:"Fehler beim Speichern",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},showDeleteJobModal:function(e){this.jobToDelete=e,this.$bvModal.show("deleteJobModal")},deleteJob:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.post("/api/jobs/admin",{query:'\n                        mutation {\n                            deleteJob(_id: "'.concat(e,'") {\n                                status\n                            }\n                        }\n                    ')});case 3:r=n.sent,"deleted"===r.data.data.deleteJob.status?t.jobs.forEach((function(n,r){n._id===e&&t.jobs.splice(r,1)})):(t.error=!0,t.$root.$bvToast.toast("Der Job konnte nicht gelöscht werden.",{title:"Fehler beim Löschen",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0})),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](0),t.error=!0,t.$root.$bvToast.toast("Der Job konnte nicht gelöscht werden. Error: ".concat(n.t0),{title:"Fehler beim Löschen",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()},rowClass:function(e,t){if(e&&"row"===t)return"published"===e.status&&!0===e.paid&&e.paidExpiresAt>new Date&&new Date(e.applicationDeadline)>new Date((new Date).valueOf()-864e5)?"table-success":void 0}}},m=d,p=n("2877"),b=Object(p["a"])(m,i,c,!1,null,null,null),f=b.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-form",{attrs:{id:"company-filter",inline:""},on:{submit:function(e){e.preventDefault()}}},[n("b-input-group",{staticClass:"my-2 mr-2"},[n("b-form-input",{attrs:{type:"text",placeholder:"Enter search term ..."},model:{value:e.filter.searchTerm,callback:function(t){e.$set(e.filter,"searchTerm",t)},expression:"filter.searchTerm"}}),n("b-input-group-append",[n("b-button",[n("Fa",{attrs:{icon:"times"},on:{click:function(t){t.preventDefault(),e.filter.searchTerm=""}}})],1)],1)],1),n("div",{staticClass:"inline-block ml-3 my-3 my-lg-0"},[e._v(" Number of Companies: "),n("strong",[e._v(e._s(e.computedCompanies.length))])])],1),n("b-table",{attrs:{responsive:"",striped:"",hover:"","sticky-header":"80vh",items:e.computedCompanies,fields:e.fields,"primary-key":"_id"},scopedSlots:e._u([{key:"cell(user)",fn:function(t){return[e._v(" "+e._s(t.item.userId.lastName+", "+t.item.userId.firstName)+" "),n("a",{attrs:{href:"mailto:"+t.item.userId.email}},[e._v(" "+e._s(t.item.userId.email))])]}},{key:"cell(createdAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(updatedAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(numberOfJobs)",fn:function(t){return[e._v(" "+e._s(e.jobs.filter((function(e){return e.company._id===t.item._id})).length)+" ")]}},{key:"cell(location)",fn:function(t){return[e._v(" "+e._s(t.item.street+" "+t.item.location+" "+t.item.zipCode+" "+t.item.state+" "+t.item.country)+" ")]}},{key:"cell(actions)",fn:function(t){return[n("b-button",{staticClass:"mr-2 mb-2",attrs:{to:"/admin/companies/edit/"+t.item._id,variant:"primary",size:"sm"}},[n("Fa",{staticClass:"mr-2",attrs:{icon:"edit"}}),e._v("Edit ")],1),n("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(n){return e.showDeleteCompanyModal(t.item)}}},[n("Fa",{staticClass:"mr-2",attrs:{icon:"trash-alt"}}),e._v(" Delete ")],1)]}}])}),n("b-modal",{attrs:{id:"deleteCompanyModal",title:"Delete "+e.companyToDelete.name,"ok-title":"Delete Company",centered:"","ok-variant":"danger","footer-class":"d-flex justify-content-between"},on:{ok:function(t){return e.deleteCompany(e.companyToDelete._id)}}},[n("p",{staticClass:"my-4"},[e._v(" Are you sure to delete this company? ")])]),n("b-alert",{staticClass:"position-fixed fixed-bottom m-0 rounded-0",staticStyle:{"z-index":"2000"},attrs:{variant:"warning",dismissible:""},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(" Oh, something went wrong. Please try again later. ")])],1)},v=[],y={name:"AllCompaniesListAdmin",data:function(){return{companies:[],jobs:[],companyToDelete:Object,error:!1,filter:{searchTerm:""},fields:[{key:"_id",label:"Company ID",sortable:!1},{key:"name",sortable:!0},{key:"createdAt",sortable:!0},{key:"updatedAt",sortable:!0},{key:"location",sortable:!1},{key:"numberOfJobs",sortable:!1},{key:"userId._id",label:"User ID",sortable:!1},{key:"user",sortable:!1},{key:"actions",sortable:!1}]}},computed:{computedCompanies:function(){var e=this,t=Object(u["a"])(this.companies);return this.filter.searchTerm&&(t=t.filter((function(t){return e.checkForSearchTerm([t._id,t.name,t.street,t.location,t.zipCode,t.state,t.country,t.userId._id,t.userId.lastName,t.userId.firstName,t.userId.email],e.filter.searchTerm)?t:void 0}))),t}},created:function(){this.getAllCompanies(),this.getAllJobs()},methods:{checkForSearchTerm:function(e,t){var n=!1;return e.forEach((function(e){e&&e.toLowerCase().includes(t.toLowerCase())&&(n=!0)})),n},getAllJobs:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("/api/jobs/admin",{query:"\n                        query {\n                            jobs {\n                                company {\n                                    _id\n                                }\n                            }\n                        }\n                    "});case 3:n=t.sent,e.jobs=n.data.data.jobs,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=!0,e.$root.$bvToast.toast("Jobs konnten nicht geladen werden. Error: ".concat(t.t0),{title:"Fehler beim Laden",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getAllCompanies:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("/api/companies/admin",{query:"\n                        query {\n                            companies {\n                                _id\n                                createdAt\n                                updatedAt\n                                name\n                                street\n                                location\n                                state\n                                zipCode\n                                country\n                                userId {\n                                    _id\n                                    createdAt\n                                    firstName\n                                    lastName\n                                    email\n                                }\n                            }\n                        }\n                    "});case 3:n=t.sent,e.companies=n.data.data.companies,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=!0,e.$root.$bvToast.toast("Unternehmen konnten nicht geladen werden. Error: ".concat(t.t0),{title:"Fehler beim Laden",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},updateCompany:function(e,t,n){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r.$axios.post("/api/companies/admin",{query:'\n                        mutation {\n                            updateCompany (_id: "'.concat(e,'", ').concat(t,": ").concat("string"===typeof n?'"'.concat(n,'"'):n,") {\n                                _id\n                                createdAt\n                                updatedAt\n                                name\n                                street\n                                location\n                                state\n                                zipCode\n                                country                         \n                                userId {\n                                    _id\n                                    createdAt\n                                    firstName\n                                    lastName\n                                    email\n                                }\n                            }\n                        }\n                    ")});case 3:o=a.sent,o.data.data.updateCompany._id&&(r.companies=r.companies.map((function(e){return e._id===o.data.data.updateCompany._id?o.data.data.updateCompany:e}))),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),r.$root.$bvToast.toast("Unternehmen konnten nicht gespeichert werden. Error: ".concat(a.t0),{title:"Fehler beim Speichern",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},showDeleteCompanyModal:function(e){this.companyToDelete=e,this.$bvModal.show("deleteCompanyModal")},deleteCompany:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.post("/api/companies/admin",{query:'\n                        mutation {\n                            deleteCompany(_id: "'.concat(e,'") {\n                                name\n                            }\n                        }\n                    ')});case 3:r=n.sent,"deleted"===r.data.data.deleteCompany.name?t.companies.forEach((function(n,r){n._id===e&&t.companies.splice(r,1)})):(t.error=!0,t.$root.$bvToast.toast("Das Unternehmen konnte nicht gelöscht werden.",{title:"Fehler beim Löschen",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0})),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](0),t.error=!0,t.$root.$bvToast.toast("Das Unternehmen konnte nicht gelöscht werden. Error: ".concat(n.t0),{title:"Fehler beim Löschen",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()}}},_=y,k=Object(p["a"])(_,h,v,!1,null,null,null),g=k.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-form",{attrs:{id:"user-filter",inline:""},on:{submit:function(e){e.preventDefault()}}},[n("b-input-group",{staticClass:"my-2 mr-2"},[n("b-form-input",{attrs:{type:"text",placeholder:"Enter search term ..."},model:{value:e.filter.searchTerm,callback:function(t){e.$set(e.filter,"searchTerm",t)},expression:"filter.searchTerm"}}),n("b-input-group-append",[n("b-button",[n("Fa",{attrs:{icon:"times"},on:{click:function(t){t.preventDefault(),e.filter.searchTerm=""}}})],1)],1)],1),n("div",{staticClass:"inline-block ml-3 my-3 my-lg-0"},[e._v(" Number of Users: "),n("strong",[e._v(e._s(e.computedUsers.length))])])],1),n("b-table",{attrs:{responsive:"",striped:"",hover:"","sticky-header":"80vh",items:e.computedUsers,fields:e.fields,"primary-key":"_id"},scopedSlots:e._u([{key:"cell(email)",fn:function(t){return[n("a",{attrs:{href:"mailto:"+t.item.email}},[e._v(" "+e._s(t.item.email))])]}},{key:"cell(createdAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(updatedAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(actions)",fn:function(t){return[n("b-button",{staticClass:"mr-2 mb-2",attrs:{to:"/admin/users/edit/"+t.item._id,variant:"primary",size:"sm"}},[n("Fa",{staticClass:"mr-2",attrs:{icon:"edit"}}),e._v("Edit ")],1),n("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(n){return e.showDeleteUserModal(t.item)}}},[n("Fa",{staticClass:"mr-2",attrs:{icon:"trash-alt"}}),e._v("Delete ")],1)]}}])}),n("b-modal",{attrs:{id:"deleteUserModal",title:"Delete "+e.userToDelete.email,"ok-title":"Delete User",centered:"","ok-variant":"danger","footer-class":"d-flex justify-content-between"},on:{ok:function(t){return e.deleteUser(e.userToDelete._id)}}},[n("p",{staticClass:"my-4"},[e._v(" Are you sure to delete this user? ")])]),n("b-alert",{staticClass:"position-fixed fixed-bottom m-0 rounded-0",staticStyle:{"z-index":"2000"},attrs:{variant:"warning",dismissible:""},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(" Oh, something went wrong. Please try again later. ")])],1)},x=[],A={name:"AllUsersListAdmin",data:function(){return{users:[],userToDelete:Object,error:!1,filter:{searchTerm:""},fields:[{key:"_id",label:"User ID",sortable:!1},{key:"firstName",sortable:!0},{key:"lastName",sortable:!0},{key:"email",sortable:!0},{key:"createdAt",sortable:!0},{key:"updatedAt",sortable:!0},{key:"status",sortable:!0},{key:"role",sortable:!0},{key:"actions",sortable:!1}]}},computed:{computedUsers:function(){var e=this,t=Object(u["a"])(this.users);return this.filter.searchTerm&&(t=t.filter((function(t){return e.checkForSearchTerm([t._id,t.lastName,t.firstName,t.email],e.filter.searchTerm)?t:void 0}))),t}},created:function(){this.getAllUsers()},methods:{checkForSearchTerm:function(e,t){var n=!1;return e.forEach((function(e){e&&e.toLowerCase().includes(t.toLowerCase())&&(n=!0)})),n},getAllUsers:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("/api/user/admin",{query:"\n                        query {\n                            users {\n                                _id\n                                createdAt\n                                updatedAt\n                                firstName\n                                lastName\n                                email\n                                status\n                                role\n                            }\n                        }\n                    "});case 3:n=t.sent,e.users=n.data.data.users,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=!0,e.$root.$bvToast.toast("Users konnten nicht geladen werden. Error: ".concat(t.t0),{title:"Fehler beim Laden",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},showDeleteUserModal:function(e){this.userToDelete=e,this.$bvModal.show("deleteUserModal")},deleteUser:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.post("/api/user/admin",{query:'\n                        mutation {\n                            deleteUser(_id: "'.concat(e,'") {\n                                firstName\n                            }\n                        }\n                    ')});case 3:r=n.sent,"deleted"===r.data.data.deleteUser.firstName?t.users.forEach((function(n,r){n._id===e&&t.users.splice(r,1)})):(t.error=!0,t.$root.$bvToast.toast("Der User konnte nicht gelöscht werden.",{title:"Fehler beim Löschen",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0})),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](0),t.error=!0,t.$root.$bvToast.toast("Der User konnte nicht gelöscht werden. Error: ".concat(n.t0),{title:"Fehler beim Löschen",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()}}},C=A,D=Object(p["a"])(C,w,x,!1,null,null,null),$=D.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-button",{staticClass:"mb-3",attrs:{to:"/admin/coupons/edit/new",variant:"outline-primary"}},[n("Fa",{staticClass:"mr-2",attrs:{icon:"plus"}}),e._v("New Coupon")],1),n("b-form",{attrs:{id:"coupon-filter",inline:""},on:{submit:function(e){e.preventDefault()}}},[n("b-input-group",{staticClass:"my-2 mr-2"},[n("b-form-input",{attrs:{type:"text",placeholder:"Enter search term ..."},model:{value:e.filter.searchTerm,callback:function(t){e.$set(e.filter,"searchTerm",t)},expression:"filter.searchTerm"}}),n("b-input-group-append",[n("b-button",[n("Fa",{attrs:{icon:"times"},on:{click:function(t){t.preventDefault(),e.filter.searchTerm=""}}})],1)],1)],1)],1),n("b-table",{attrs:{responsive:"",striped:"",hover:"","sticky-header":"80vh",items:e.computedCoupons,fields:e.fields,"primary-key":"_id"},scopedSlots:e._u([{key:"cell(user)",fn:function(t){return[t.item.userId?n("div",[e._v(" "+e._s(t.item.userId.lastName+", "+t.item.userId.firstName)+" "),n("a",{attrs:{href:"mailto:"+t.item.userId.email}},[e._v(" "+e._s(t.item.userId.email))])]):e._e()]}},{key:"cell(createdAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(updatedAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(expireAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(actions)",fn:function(t){return[n("b-button",{staticClass:"mr-2 mb-2",attrs:{to:"/admin/coupons/"+t.item._id,variant:"primary",size:"sm"}},[n("Fa",{attrs:{icon:"edit"}})],1),n("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(n){return e.showDeleteCouponModal(t.item)}}},[n("Fa",{staticClass:"mr-2",attrs:{icon:"trash-alt"}}),e._v("Delete ")],1)]}}])}),n("b-modal",{attrs:{id:"deleteCouponModal",title:"Delete "+e.couponToDelete.code,"ok-title":"Delete Coupon",centered:"","ok-variant":"danger","footer-class":"d-flex justify-content-between"},on:{ok:function(t){return e.deleteCoupon(e.couponToDelete._id)}}},[n("p",{staticClass:"my-4"},[e._v(" Are you sure to delete this coupon? ")])]),n("b-alert",{staticClass:"position-fixed fixed-bottom m-0 rounded-0",staticStyle:{"z-index":"2000"},attrs:{variant:"warning",dismissible:""},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(" Oh, something went wrong. Please try again later. ")])],1)},S=[],I=(n("d3b7"),n("25f0"),{name:"AllCouponsListAdmin",data:function(){return{coupons:[],couponToDelete:Object,error:!1,filter:{searchTerm:""},fields:[{key:"_id",label:"Coupon ID",sortable:!1},{key:"code",sortable:!1},{key:"discount",sortable:!0},{key:"usage",sortable:!0},{key:"refreshFrequency",sortable:!0},{key:"userId._id",label:"User ID",sortable:!1},{key:"user",sortable:!0},{key:"createdAt",sortable:!0},{key:"updatedAt",sortable:!0},{key:"expireAt",label:"Expires at",sortable:!0},{key:"actions",sortable:!1}]}},computed:{computedCoupons:function(){var e=this,t=Object(u["a"])(this.coupons);return this.filter.searchTerm&&(t=t.filter((function(t){return e.checkForSearchTerm([t._id,t.code,t.discount,t.userId&&t.userId._id,t.userId&&t.userId.firstName,t.userId&&t.userId.lastName,t.userId&&t.userId.email],e.filter.searchTerm)?t:void 0}))),t}},created:function(){this.getAllCoupons()},methods:{checkForSearchTerm:function(e,t){var n=!1;return e.forEach((function(e){e&&e.toString().toLowerCase().includes(t.toLowerCase())&&(n=!0)})),n},getAllCoupons:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("/api/coupons/admin",{query:"\n                        query {\n                            coupons {\n                                _id\n                                code\n                                discount\n                                refreshFrequency\n                                usage\n                                createdAt\n                                updatedAt\n                                expireAt\n                                userId {\n                                    _id\n                                    firstName\n                                    lastName\n                                    email\n                                }\n                            }\n                        }\n                    "});case 3:n=t.sent,e.coupons=n.data.data.coupons,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=!0,e.$root.$bvToast.toast("Codes konnten nicht geladen werden.",{title:"Fehler beim Laden",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},showDeleteCouponModal:function(e){this.couponToDelete=e,this.$bvModal.show("deleteCouponModal")},deleteCoupon:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.post("/api/coupons/admin",{query:'\n                        mutation {\n                            deleteCoupon(_id: "'.concat(e,'") {\n                                code\n                            }\n                        }\n                    ')});case 3:r=n.sent,"deleted"===r.data.data.deleteCoupon.code?t.coupons.forEach((function(n,r){n._id===e&&t.coupons.splice(r,1)})):(t.error=!0,t.$root.$bvToast.toast("Der Code konnte nicht gelöscht werden.",{title:"Fehler beim Löschen",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0})),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](0),t.error=!0,t.$root.$bvToast.toast("Der Code konnte nicht gelöscht werden. Error: ".concat(n.t0),{title:"Fehler beim Löschen",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()}}}),j=I,F=Object(p["a"])(j,T,S,!1,null,null,null),E=F.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-form",{attrs:{id:"subscriber-filter",inline:""},on:{submit:function(e){e.preventDefault()}}},[n("b-input-group",{staticClass:"my-2 mr-3"},[n("b-form-input",{attrs:{type:"text",placeholder:"Enter search term ..."},model:{value:e.filter.searchTerm,callback:function(t){e.$set(e.filter,"searchTerm",t)},expression:"filter.searchTerm"}}),n("b-input-group-append",[n("b-button",[n("Fa",{attrs:{icon:"times"},on:{click:function(t){t.preventDefault(),e.filter.searchTerm=""}}})],1)],1)],1),n("div",{staticClass:"inline-block mr-5 ml-3 ml-lg-0 my-3 my-lg-0"},[e._v(" Number of Subscribers: "),n("strong",[e._v(e._s(e.computedSubscribers.length))])]),n("b-button",{staticClass:"d-none d-lg-inline-block",attrs:{variant:e.newsletterSent?"success":"danger",disabled:!e.sendNewsletterActive,size:"sm"},on:{click:function(t){return t.preventDefault(),e.sendNewsletter(t)}}},[e._v(" "+e._s(e.newsletterSent?"Newsletter Sent":"Send Newsletter now")+" ")]),n("b-input-group",{staticClass:"d-none d-lg-flex my-2 mr-3"},[n("b-form-input",{staticClass:"ml-2",staticStyle:{width:"95px"},attrs:{type:"number",placeholder:"daysBack"},model:{value:e.daysBack,callback:function(t){e.daysBack=t},expression:"daysBack"}}),n("b-input-group-append",[n("b-button",{attrs:{variant:"dark",size:"sm"}},[e._v("daysBack")])],1)],1),n("b-form-checkbox",{staticClass:"d-none d-lg-flex my-2 mr-3",attrs:{name:"check-button",switch:""},model:{value:e.sendNewsletterActive,callback:function(t){e.sendNewsletterActive=t},expression:"sendNewsletterActive"}},[e._v(" enabled ")]),n("b-button",{staticClass:"d-none d-lg-flex my-2 mr-3",attrs:{variant:"primary",size:"sm"},on:{click:e.emailsToClipboard}},[e._v("Copy all emails")])],1),n("b-table",{attrs:{responsive:"",striped:"",hover:"","sticky-header":"80vh",items:e.computedSubscribers,fields:e.fields,"primary-key":"_id"},scopedSlots:e._u([{key:"cell(email)",fn:function(t){return[n("a",{attrs:{href:"mailto:"+t.item.email}},[e._v(" "+e._s(t.item.email))])]}},{key:"cell(createdAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(updatedAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(actions)",fn:function(t){return[n("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(n){return e.showDeleteSubscriberModal(t.item)}}},[n("Fa",{staticClass:"mr-2",attrs:{icon:"trash-alt"}}),e._v("Delete ")],1)]}}])}),n("b-modal",{attrs:{id:"deleteSubscriberModal",title:"Delete "+e.subscriberToDelete.email,"ok-title":"Delete Subscriber",centered:"","ok-variant":"danger","footer-class":"d-flex justify-content-between"},on:{ok:function(t){return e.deleteSubscriber(e.subscriberToDelete._id)}}},[n("p",{staticClass:"my-4"},[e._v(" Are you sure to delete this subscriber? ")])]),n("b-alert",{staticClass:"position-fixed fixed-bottom m-0 rounded-0",staticStyle:{"z-index":"2000"},attrs:{variant:"warning",dismissible:""},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(" Oh, something went wrong. Please try again later. ")])],1)},O=[],L=(n("a15b"),{name:"AllSubscribersListAdmin",data:function(){return{subscribers:[],subscriberToDelete:Object,error:!1,filter:{searchTerm:""},daysBack:7,sendNewsletterActive:!1,fields:[{key:"_id",label:"Subscriber ID",sortable:!1},{key:"email",sortable:!0},{key:"state",sortable:!0},{key:"createdAt",sortable:!0},{key:"updatedAt",sortable:!0},{key:"status",sortable:!0},{key:"actions",sortable:!1}],newsletterSent:!1}},computed:{computedSubscribers:function(){var e=this,t=Object(u["a"])(this.subscribers);return this.filter.searchTerm&&(t=t.filter((function(t){return e.checkForSearchTerm([t._id,t.lastName,t.firstName,t.email],e.filter.searchTerm)?t:void 0}))),t}},created:function(){this.getAllSubscribers()},methods:{checkForSearchTerm:function(e,t){var n=!1;return e.forEach((function(e){e&&e.toLowerCase().includes(t.toLowerCase())&&(n=!0)})),n},getAllSubscribers:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("/api/subscriber/admin",{query:"\n                        query {\n                            subscribers {\n                                _id\n                                createdAt\n                                updatedAt\n                                email\n                                state\n                                status\n                            }\n                        }\n                    "});case 3:n=t.sent,e.subscribers=n.data.data.subscribers,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.error=!0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},showDeleteSubscriberModal:function(e){this.subscriberToDelete=e,this.$bvModal.show("deleteSubscriberModal")},deleteSubscriber:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.post("/api/subscriber/admin",{query:'\n                        mutation {\n                            deleteSubscriber(_id: "'.concat(e,'") {\n                                status\n                            }\n                        }\n                    ')});case 3:r=n.sent,"deleted"===r.data.data.deleteSubscriber.status?t.subscribers.forEach((function(n,r){n._id===e&&t.subscribers.splice(r,1)})):t.error=!0,n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),t.error=!0;case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},sendNewsletter:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setOverlay",!0),t.next=3,e.$axios.post("/api/newsletter/send",{daysBack:e.daysBack});case 3:n=t.sent,e.newsletterSent=n.data.success,e.sendNewsletterActive=!1,e.$store.dispatch("setOverlay",!1);case 7:case"end":return t.stop()}}),t)})))()},emailsToClipboard:function(){var e=document.createElement("textarea");e.value=this.subscribers.filter((function(e){return"active"===e.status})).map((function(e){return e.email})).join("; "),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}}),J=L,q=Object(p["a"])(J,N,O,!1,null,null,null),U=q.exports,R={name:"AdminHome",components:{AllJobsListAdmin:f,AllCompaniesListAdmin:g,AllUsersListAdmin:$,AllCouponsListAdmin:E,AllSubscribersListAdmin:U},data:function(){return{query:{tab:parseInt(this.$route.query.tab)||0}}},methods:{setQuery:function(e,t){this.query[e]=t,this.$router.push({query:Object(s["a"])(Object(s["a"])({},this.$route.query),{},Object(o["a"])({},e,t))})}}},z=R,M=Object(p["a"])(z,r,a,!1,null,null,null);t["default"]=M.exports},7156:function(e,t,n){var r=n("861d"),a=n("d2bb");e.exports=function(e,t,n){var o,s;return a&&"function"==typeof(o=t.constructor)&&o!==n&&r(s=o.prototype)&&s!==n.prototype&&a(e,s),e}},a15b:function(e,t,n){"use strict";var r=n("23e7"),a=n("44ad"),o=n("fc6a"),s=n("a640"),i=[].join,c=a!=Object,l=s("join",",");r({target:"Array",proto:!0,forced:c||!l},{join:function(e){return i.call(o(this),void 0===e?",":e)}})},a9e3:function(e,t,n){"use strict";var r=n("83ab"),a=n("da84"),o=n("94ca"),s=n("6eeb"),i=n("5135"),c=n("c6b6"),l=n("7156"),u=n("c04e"),d=n("d039"),m=n("7c73"),p=n("241c").f,b=n("06cf").f,f=n("9bf2").f,h=n("58a8").trim,v="Number",y=a[v],_=y.prototype,k=c(m(_))==v,g=function(e){var t,n,r,a,o,s,i,c,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=h(l),t=l.charCodeAt(0),43===t||45===t){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+l}for(o=l.slice(2),s=o.length,i=0;i<s;i++)if(c=o.charCodeAt(i),c<48||c>a)return NaN;return parseInt(o,r)}return+l};if(o(v,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var w,x=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof x&&(k?d((function(){_.valueOf.call(n)})):c(n)!=v)?l(new y(g(t)),n,x):g(t)},A=r?p(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;A.length>C;C++)i(y,w=A[C])&&!i(x,w)&&f(x,w,b(y,w));x.prototype=_,_.constructor=x,s(a,v,x)}},da34:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"edit-company py-5"},[n("h2",[e._v("Unternehmen bearbeiten")]),n("CompanyForm",{attrs:{apiJobsSchema:"admin"}})],1)},a=[],o=n("1ce6"),s={name:"AdminEditCompany",components:{CompanyForm:o["a"]}},i=s,c=n("2877"),l=Object(c["a"])(i,r,a,!1,null,null,null);t["default"]=l.exports},de84:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"new-job py-5"},[n("h2",[e._v("Add/Update Coupon")]),n("CouponForm",{attrs:{couponId:"new"===e.$route.params.couponId?null:e.$route.params.couponId}})],1)},a=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"coupon-form position-relative"},[n("b-form",{attrs:{id:"coupon-form"}},[n("label",{attrs:{for:"code"}},[e._v("Code *")]),n("b-form-input",{attrs:{type:"text",state:e.validated?!!e.coupon.code:null,id:"coupon-code",placeholder:"Enter coupon code ...",required:""},model:{value:e.coupon.code,callback:function(t){e.$set(e.coupon,"code",t)},expression:"coupon.code"}}),n("label",{attrs:{for:"discount"}},[e._v("Discount *")]),n("b-form-input",{attrs:{type:"number",number:"",min:"0",max:"1",step:"0.01",state:e.validated?!!e.coupon.discount:null,id:"discount",placeholder:"Enter discount ...",required:""},model:{value:e.coupon.discount,callback:function(t){e.$set(e.coupon,"discount",t)},expression:"coupon.discount"}}),n("label",{attrs:{for:"refresh-frequency"}},[e._v("Refrech Frequency *")]),n("b-form-input",{attrs:{type:"number",number:"",min:"0",step:"1",state:e.validated?!!e.coupon.refreshFrequency:null,id:"refresh-frequency",placeholder:"Refresh ad after X days...",required:""},model:{value:e.coupon.refreshFrequency,callback:function(t){e.$set(e.coupon,"refreshFrequency",t)},expression:"coupon.refreshFrequency"}}),n("label",{attrs:{for:"usage"}},[e._v("Usage")]),n("b-form-select",{attrs:{id:"usage",state:!!e.validated||null},model:{value:e.coupon.usage,callback:function(t){e.$set(e.coupon,"usage",t)},expression:"coupon.usage"}},[n("b-form-select-option",{attrs:{value:"unlimited"}},[e._v("unlimited")]),n("b-form-select-option",{attrs:{value:"single"}},[e._v("single")]),n("b-form-select-option",{attrs:{value:"singlePerUser"}},[e._v("Single per User")])],1),n("label",{attrs:{for:"user-id"}},[e._v("User ID")]),n("b-form-input",{attrs:{type:"text",state:!!e.validated||null,id:"user-id",placeholder:"Enter User ID ..."},model:{value:e.coupon.userId._id,callback:function(t){e.$set(e.coupon.userId,"_id",t)},expression:"coupon.userId._id"}}),n("label",{attrs:{for:"expire-at"}},[e._v("Expiration Date")]),n("b-form-datepicker",{attrs:{"value-as-date":!0,state:!(!e.validated||!e.coupon.expireAt)||null,id:"expire-at",placeholder:"Choose a date"},model:{value:e.coupon.expireAt,callback:function(t){e.$set(e.coupon,"expireAt",t)},expression:"coupon.expireAt"}}),n("div",{staticClass:"d-flex justify-content-between my-4"},[n("b-button",{attrs:{variant:"outline-danger",to:"/admin?tab=3"}},[e._v(" Cancel ")]),n("b-button",{attrs:{variant:"success"},on:{click:function(t){return t.preventDefault(),e.onSubmit(t)}}},[e.success?n("Fa",{staticClass:"mr-2",attrs:{icon:"check"}}):e._e(),e._v(" "+e._s(e.success?"Done":"Save")+" ")],1)],1)],1),e.error?n("b-alert",{staticClass:"mt-3",attrs:{show:"",dismissible:"",variant:"warning"}},[e._v(e._s(e.error))]):e._e()],1)},s=[],i=(n("99af"),n("a9e3"),n("96cf"),n("1da1")),c={name:"CouponForm",props:["couponId"],data:function(){return{coupon:{_id:"",code:"",discount:0,refreshFrequency:0,usage:"unlimited",expireAt:null,userId:{_id:null}},validated:null,success:"",error:""}},created:function(){this.couponId&&this.getCoupon(this.couponId)},methods:{getCoupon:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.post("/api/coupons/admin",{query:'\n                        query {\n                            coupon(_id: "'.concat(e,'") {\n                                _id\n                                code\n                                discount\n                                refreshFrequency\n                                usage\n                                expireAt\n                                userId {\n                                    _id\n                                }\n                            }\n                        }\n                    ')});case 3:r=n.sent,r.data.data.coupon.userId||(r.data.data.coupon.userId={_id:null}),r.data.data.coupon.expireAt?r.data.data.coupon.expireAt=new Date(r.data.data.coupon.expireAt):r.data.data.coupon.expireAt=null,t.coupon=r.data.data.coupon,n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),t.$root.$bvToast.toast("Beim Laden des Coupons ist ein Fehler aufgetreten.",{title:"Fehler beim Laden",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()},onSubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.error=!1,e.formValidation()){t.next=4;break}return e.error="Please provide all necessary information.",t.abrupt("return",null);case 4:return e.$store.dispatch("setOverlay",!0),t.prev=5,n=e.couponId?"updateCoupon":"addCoupon",r="\n                    mutation {\n                        ".concat(n,"(\n                            ").concat("updateCoupon"===n?'_id: "'.concat(e.couponId,'"'):"",'\n                            code: "').concat(e.coupon.code,'"\n                            discount: ').concat(e.coupon.discount,"\n                            refreshFrequency: ").concat(e.coupon.refreshFrequency,'\n                            usage: "').concat(e.coupon.usage,'"\n                            ').concat(e.coupon.expireAt?"expireAt: ".concat(Number(e.coupon.expireAt)):"","\n                            ").concat(e.coupon.userId._id?'userId: "'.concat(e.coupon.userId._id,'"'):"","\n                        ) {\n                            _id\n                        }\n                    }\n                "),t.next=10,e.$axios.post("/api/coupons/admin",{query:r});case 10:a=t.sent,a.data.data[n]?(e.success=!0,e.$root.$bvToast.toast("Der Coupon wurde erfolgreich gespeichert.",{title:"Coupon gespeichert",variant:"success",toaster:"b-toaster-bottom-right",solid:!0}),e.$router.go(-1)):e.$root.$bvToast.toast("Beim Speichern des Coupons ist ein Fehler aufgetreten.",{title:"Fehler beim Speichern",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0}),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](5),e.$root.$bvToast.toast("Beim Speichern des Coupons ist ein Fehler aufgetreten.",{title:"Fehler beim Speichern",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 17:e.$store.dispatch("setOverlay",!1);case 18:case"end":return t.stop()}}),t,null,[[5,14]])})))()},formValidation:function(){return this.validated=!0,!(!this.coupon.code||!this.coupon.discount&&!this.coupon.refreshFrequency)},formReset:function(){for(var e in this.coupon)this.coupon[e]=""},hasHistory:function(){return window.history.length>2}}},l=c,u=n("2877"),d=Object(u["a"])(l,o,s,!1,null,null,null),m=d.exports,p={name:"AdminCouponView",components:{CouponForm:m}},b=p,f=Object(u["a"])(b,r,a,!1,null,null,null);t["default"]=f.exports},f954:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"jobpage py-5"},[n("Job",{attrs:{apiJobsSchema:"admin"}})],1)},a=[],o=n("890f"),s={name:"AdminJobPreview",components:{Job:o["a"]}},i=s,c=n("2877"),l=Object(c["a"])(i,r,a,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=admin.b3d1428f.js.map