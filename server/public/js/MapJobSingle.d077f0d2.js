(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["MapJobSingle"],{a050:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"map"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showMap,expression:"showMap"}],ref:"hereMap",staticClass:"map-container"}),s("Head",{attrs:{link:e.link}})],1)},i=[],o={name:"MapJobSingle",props:{job:{type:Object,default:()=>{}}},data(){return{platform:null,apikey:"n3GOlcV0Z6utqCKpJlDWH6lWYtJdvR0QomMzYs_EreM",mapContainer:null,map:null,mapTypes:null,H:null,showMap:!0,link:[{id:"mapsjs-ui",rel:"stylesheet",href:"https://js.api.here.com/v3/3.1/mapsjs-ui.css",type:"text/css"}]}},watch:{job(){this.deleteMarkers(),this.setMapMarker(this.job,this.getGeoCode(this.job),this.H),this.moveMap(this.getGeoCode(this.job))}},async mounted(){window&&(window.prerenderReady=!0);try{await this.$loadScript("https://js.api.here.com/v3/3.1/mapsjs-core.js"),await Promise.all([this.$loadScript("https://js.api.here.com/v3/3.1/mapsjs-service.js"),this.$loadScript("https://js.api.here.com/v3/3.1/mapsjs-mapevents.js"),this.$loadScript("https://js.api.here.com/v3/3.1/mapsjs-ui.js")]);const e=new window.H.service.Platform({apikey:this.apikey});this.platform=e,this.initializeHereMap()}catch(e){}},methods:{getGeoCode(e){let t;return e.company&&(t={lat:e.company.geoCodeLat,lng:e.company.geoCodeLng}),t},setMapMarker(e,t,s){const a=document.createElement("div");a.classList.add("icon-outer");const i=document.createElement("img");i.classList.add("icon-inner"),i.src=e.company.logoUrl||"/img/favicon.png",i.alt="Logo - "+(e.company.logoUrl?e.company.name:"MFA mal anders"),a.appendChild(i);const o=new s.map.DomIcon(a);this.map.addObject(new window.H.map.DomMarker(t,{icon:o}))},deleteMarkers(){this.map&&this.map.removeObjects(this.map.getObjects())},moveMap(e){this.map.setCenter(e),this.map.setZoom(13)},async initializeHereMap(){try{const e=this.getGeoCode(this.job);e&&(this.mapContainer=this.$refs.hereMap,this.H=window.H,this.maptypes=this.platform.createDefaultLayers({lg:this.$config.maps.lang}),this.map=new this.H.Map(this.mapContainer,this.maptypes.vector.normal.map,{zoom:13,center:e}),this.setMapMarker(this.job,e,this.H),addEventListener("resize",()=>this.map.getViewPort().resize()),new this.H.mapevents.Behavior(new this.H.mapevents.MapEvents(this.map)),this.H.ui.UI.createDefault(this.map,this.maptypes))}catch(e){this.showMap=!1}}}},p=o,n=s("2877"),r=Object(n["a"])(p,a,i,!1,null,null,null);t["default"]=r.exports}}]);
//# sourceMappingURL=MapJobSingle.d077f0d2.js.map