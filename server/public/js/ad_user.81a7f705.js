(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ad_user"],{4874:function(e,t,a){"use strict";a("5371")},"49b3":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-user container py-5"},[a("h2",[e._v("Nutzer bearbeiten")]),a("AccountDataForm",{attrs:{"api-users-schema":"admin"}})],1)},i=[],r=a("986e"),n={name:"AdminEditUser",components:{AccountDataForm:r["a"]}},l=n,o=a("2877"),d=Object(o["a"])(l,s,i,!1,null,null,null);t["default"]=d.exports},5371:function(e,t,a){},"986e":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account-data-form position-relative mb-3"},[a("b-form",{attrs:{id:"account-data-form"}},[a("label",{attrs:{for:"user-gender"}},[e._v("Anrede")]),a("b-form-select",{attrs:{id:"user-gender",state:e.validated&&!!e.user.gender||null,disabled:e.disabled},model:{value:e.user.gender,callback:function(t){e.$set(e.user,"gender",t)},expression:"user.gender"}},[a("b-form-select-option",{attrs:{value:""}},[e._v("-- Anrede auswählen --")]),e._l(e.contactGenderOptions,(function(t){return a("b-form-select-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],2),a("label",{attrs:{for:"user-title"}},[e._v("Titel")]),a("b-form-select",{attrs:{id:"user-title",state:e.validated&&!!e.user.title||null,disabled:e.disabled},model:{value:e.user.title,callback:function(t){e.$set(e.user,"title",t)},expression:"user.title"}},[a("b-form-select-option",{attrs:{value:""}},[e._v("-- Titel auswählen --")]),e._l(e.contactTitleOptions,(function(t){return a("b-form-select-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],2),a("label",{attrs:{for:"first-name",required:""}},[e._v("Vorname")]),a("b-form-input",{attrs:{id:"first-name",type:"text",state:e.validated?!!e.user.firstName:null,placeholder:"Vorname eingeben...",required:"",disabled:e.disabled},model:{value:e.user.firstName,callback:function(t){e.$set(e.user,"firstName",t)},expression:"user.firstName"}}),a("label",{attrs:{for:"last-name",required:""}},[e._v("Nachname")]),a("b-form-input",{attrs:{id:"last-name",type:"text",state:e.validated?!!e.user.lastName:null,placeholder:"Nachname eingeben...",required:"",disabled:e.disabled},model:{value:e.user.lastName,callback:function(t){e.$set(e.user,"lastName",t)},expression:"user.lastName"}}),a("label",{attrs:{for:"email",required:""}},[e._v("E-Mail Adresse")]),a("b-form-input",{attrs:{id:"email",type:"email",state:e.validated?!!e.user.email:null,placeholder:"E-Mail Adresse eingeben...",required:"",disabled:e.disabled},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),a("label",{staticClass:"d-block",attrs:{for:"role"}},[e._v("Rolle")]),a("b-form-checkbox",{attrs:{id:"is-employer",value:!0,"unchecked-value":!1,disabled:e.disabled,inline:""},model:{value:e.user.isEmployer,callback:function(t){e.$set(e.user,"isEmployer",t)},expression:"user.isEmployer"}},[e._v(" Arbeitgeber ")]),a("b-form-checkbox",{attrs:{id:"is-employee",value:!0,"unchecked-value":!1,disabled:e.disabled,inline:""},model:{value:e.user.isEmployee,callback:function(t){e.$set(e.user,"isEmployee",t)},expression:"user.isEmployee"}},[e._v(" MFA / ZFA ")]),a("b-form-checkbox",{attrs:{id:"is-educational",value:!0,"unchecked-value":!1,disabled:e.disabled,inline:""},model:{value:e.user.isEducational,callback:function(t){e.$set(e.user,"isEducational",t)},expression:"user.isEducational"}},[e._v(" Fortbildungsanbieter ")]),a("div",{staticClass:"d-flex justify-content-between my-4"},[a("b-button",{attrs:{variant:e.disabled?"primary":"outline-danger",size:"sm"},on:{click:function(t){e.disabled=!e.disabled}}},[e.disabled?a("svg",{staticClass:"bi bi-pencil-square mr-2",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}}),a("path",{attrs:{"fill-rule":"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"}})]):e._e(),e._v(" "+e._s(e.disabled?"Bearbeiten":"Abbrechen")+" ")]),e.disabled?e._e():a("b-button",{attrs:{variant:"success",size:"sm"},on:{click:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[e._v(" Speichern ")])],1)],1)],1)},i=[],r=a("1ba6"),n={name:"AccountDataForm",props:{apiUsersSchema:{type:String,default:"private"}},data(){return{user:{_id:"",gender:null,title:null,firstName:"",lastName:"",email:"",isEmployer:!1,isEmployee:!1,isEducational:!1},contactGenderOptions:r["d"],contactTitleOptions:r["e"],disabled:!0,validated:null}},computed:{userQuery:function(){return"admin"===this.apiUsersSchema?"adminUser":"me"}},created(){this.getUserData()},methods:{async getUserData(){try{this.$store.dispatch("setOverlay",!0);const e=await this.$axios.get("/graphql",{params:{query:`\n              query {\n                  ${this.userQuery} ${"admin"===this.apiUsersSchema?`(_id: "${this.$route.params.userId}")`:""}\n                {\n                  _id\n                  gender\n                  title\n                  firstName\n                  lastName\n                  email\n                  isEmployer\n                  isEmployee\n                  isEducational\n                }\n              }\n            `}});e.data.data[this.userQuery]&&(this.user=e.data.data[this.userQuery])}catch(e){}this.$store.dispatch("setOverlay",!1)},async onSubmit(){if(this.formValidation()){this.$store.dispatch("setOverlay",!0);try{const e="admin"===this.apiUsersSchema?"adminUpdateUser":"updateMe",t=await this.$axios.post("/graphql",{query:`\n              mutation {\n                  ${e} (\n                      ${"admin"===this.apiUsersSchema?`_id: "${this.user._id}",`:""}\n                      gender: "${this.user.gender}",\n                      title: "${this.user.title}",\n                      firstName: "${this.user.firstName}",\n                      lastName: "${this.user.lastName}",\n                      email: "${this.user.email.toLowerCase()}",\n                      isEmployer: ${this.user.isEmployer},\n                      isEmployee: ${this.user.isEmployee},\n                      isEducational: ${this.user.isEducational},\n                  ) {\n                      _id\n                      status\n                  }\n              }\n          `});if(!t.data.data[e])throw new Error("Beim Speichern ist ein Fehler aufgetreten.");this.disabled=!0,await this.$store.dispatch("fetchUserFromDb"),this.$root.$bvToast.toast("Ihre Daten wurden erfolgreich gespeichert.",{title:"Daten gespeichert",variant:"success",toaster:"b-toaster-bottom-right",solid:!0}),"pending"!==t.data.data[e].status||this.$store.state.auth.user.isAdmin||(await this.$store.dispatch("fetchUserFromDb"),await this.$axios.get("/api/auth/verification/get-activation-email"),this.$root.$bvToast.toast("In den nächsten Minuten erhalten Sie eine E-Mail zur Verifizierung Ihrer E-Mail Adresse in Ihr Postfach. Bitte bestätigen Sie Ihre E-Mail Adresse über den dort enthaltenen Bestätigunglink.",{title:"E-Mail verifizieren",variant:"info",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0}))}catch(e){this.$root.$bvToast.toast("Beim Speichern Ihrer Daten ist ein Fehler aufgetreten. Bitte versuchen Sie es noch einmal.",{title:"Fehler beim Speichern",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0})}this.$store.dispatch("setOverlay",!1)}},formValidation(){return this.validated=!0,!!(this.user.firstName&&this.user.lastName&&this.user.email)}}},l=n,o=(a("4874"),a("2877")),d=Object(o["a"])(l,s,i,!1,null,"12590b8c",null);t["a"]=d.exports}}]);
//# sourceMappingURL=ad_user.81a7f705.js.map