(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ad_payment"],{"4e07":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"edit-payment container py-5"},[n("h2",[e._v("Zahlung bearbeiten")]),n("PaymentForm")],1)},i=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"payment-form position-relative"},[n("b-form",{staticClass:"payment-form"},[n("label",{attrs:{for:"user-id"}},[e._v("User ID")]),n("b-form-input",{attrs:{id:"user-id",type:"text",placeholder:"User ID eingeben...",trim:"",required:""},model:{value:e.payment.user,callback:function(t){e.$set(e.payment,"user",t)},expression:"payment.user"}}),n("label",{attrs:{for:"job-id"}},[e._v("Job ID")]),n("b-form-input",{attrs:{id:"job-id",type:"text",placeholder:"Job ID eingeben...",trim:"",required:""},model:{value:e.payment.job,callback:function(t){e.$set(e.payment,"job",t)},expression:"payment.job"}}),n("label",{attrs:{for:"coupon-id"}},[e._v("Coupon ID")]),n("b-form-input",{attrs:{id:"coupon-id",type:"text",placeholder:"Coupon ID eingeben...",trim:""},model:{value:e.payment.coupon,callback:function(t){e.$set(e.payment,"coupon",t)},expression:"payment.coupon"}}),n("label",{attrs:{for:"payment-status"}},[e._v("Payment Status")]),n("b-form-select",{attrs:{id:"payment-status"},model:{value:e.payment.status,callback:function(t){e.$set(e.payment,"status",t)},expression:"payment.status"}},[n("b-form-select-option",{attrs:{value:""}},[e._v("-- Status auswählen --")]),n("b-form-select-option",{attrs:{value:"pending"}},[e._v("pending")]),n("b-form-select-option",{attrs:{value:"paid"}},[e._v("paid")]),n("b-form-select-option",{attrs:{value:"cancelled"}},[e._v("cancelled")])],1),n("label",{attrs:{for:"invoice-no"}},[e._v("Invoice No")]),n("b-form-input",{attrs:{id:"invoice-no",type:"number",placeholder:"Invoice No eingeben...",trim:""},model:{value:e.payment.invoiceNo,callback:function(t){e.$set(e.payment,"invoiceNo",t)},expression:"payment.invoiceNo"}}),n("label",{attrs:{for:"invoice-date"}},[e._v("Invoice Date")]),n("b-form-datepicker",{attrs:{id:"invoice-date",placeholder:"Invoice Date eingeben...","value-as-date":!0},model:{value:e.invoiceDate,callback:function(t){e.invoiceDate=t},expression:"invoiceDate"}}),n("label",{attrs:{for:"payment-type"}},[e._v("Payment Status")]),n("b-form-select",{attrs:{id:"payment-type"},model:{value:e.payment.paymentType,callback:function(t){e.$set(e.payment,"paymentType",t)},expression:"payment.paymentType"}},[n("b-form-select-option",{attrs:{value:"invoice"}},[e._v("invoice")]),n("b-form-select-option",{attrs:{value:"stripe"}},[e._v("stripe")])],1),n("label",{attrs:{for:"pricing-package"}},[e._v("Pricing Package")]),n("b-form-select",{attrs:{id:"pricing-package"},model:{value:e.payment.pricingPackage,callback:function(t){e.$set(e.payment,"pricingPackage",t)},expression:"payment.pricingPackage"}},[n("b-form-select-option",{attrs:{value:""}},[e._v("-- Choose Pricing Package --")]),e._l(e.$config.pricingPackages,(function(t){return n("b-form-select-option",{key:t.name,attrs:{value:t.name}},[e._v(e._s(t.name))])}))],2),n("label",{attrs:{for:"amount"}},[e._v("Amount [Cents]")]),n("b-form-input",{attrs:{id:"amount",type:"number",min:"0",placeholder:"Amount eingeben..."},model:{value:e.payment.amount,callback:function(t){e.$set(e.payment,"amount",t)},expression:"payment.amount"}}),n("label",{attrs:{for:"fee"}},[e._v("Fee [Cents]")]),n("b-form-input",{attrs:{id:"fee",type:"number",min:"0",placeholder:"Fee eingeben..."},model:{value:e.payment.fee,callback:function(t){e.$set(e.payment,"fee",t)},expression:"payment.fee"}}),n("label",{attrs:{for:"taxes"}},[e._v("Taxes [Cents]")]),n("b-form-input",{attrs:{id:"taxes",type:"number",min:"0",placeholder:"Taxes eingeben...",trim:""},model:{value:e.payment.taxes,callback:function(t){e.$set(e.payment,"taxes",t)},expression:"payment.taxes"}}),n("label",{attrs:{for:"billing-email"}},[e._v("Billing Email Address")]),n("b-form-input",{attrs:{id:"billing-email",type:"text",placeholder:"Billing Email Address eingeben...",trim:"",required:""},model:{value:e.payment.billingEmail,callback:function(t){e.$set(e.payment,"billingEmail",t)},expression:"payment.billingEmail"}}),n("label",{attrs:{for:"billing-phone"}},[e._v("Billing Phone Number")]),n("b-form-input",{attrs:{id:"billing-phone",type:"text",placeholder:"Billing Phone Number eingeben...",trim:""},model:{value:e.payment.billingPhone,callback:function(t){e.$set(e.payment,"billingPhone",t)},expression:"payment.billingPhone"}}),n("label",{attrs:{for:"billing-company"}},[e._v("Billing Company")]),n("b-input",{attrs:{id:"billing-company",type:"text",placeholder:"Billing Company eingeben...",trim:""},model:{value:e.payment.billingCompany,callback:function(t){e.$set(e.payment,"billingCompany",t)},expression:"payment.billingCompany"}}),n("label",{attrs:{for:"billing-department"}},[e._v("Billing Department")]),n("b-input",{attrs:{id:"billing-department",type:"text",placeholder:"Billing Department eingeben...",trim:""},model:{value:e.payment.billingDepartment,callback:function(t){e.$set(e.payment,"billingDepartment",t)},expression:"payment.billingDepartment"}}),n("label",{attrs:{for:"billing-gender"}},[e._v("Billing Gender")]),n("b-form-select",{attrs:{id:"billing-gender"},model:{value:e.payment.billingGender,callback:function(t){e.$set(e.payment,"billingGender",t)},expression:"payment.billingGender"}},[n("b-form-select-option",{attrs:{value:""}},[e._v("-- Anrede auswählen --")]),e._l(e.contactGenderOptions,(function(t){return n("b-form-select-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],2),n("label",{attrs:{for:"billing-title"}},[e._v("Billing Title")]),n("b-form-select",{attrs:{id:"billing-title"},model:{value:e.payment.billingTitle,callback:function(t){e.$set(e.payment,"billingTitle",t)},expression:"payment.billingTitle"}},[n("b-form-select-option",{attrs:{value:""}},[e._v("-- Titel auswählen --")]),e._l(e.contactTitleOptions,(function(t){return n("b-form-select-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],2),n("label",{attrs:{for:"firstname"}},[e._v("Billing First Name")]),n("b-form-input",{attrs:{id:"firstname",type:"text",placeholder:"First Name eingeben...",trim:"",required:""},model:{value:e.payment.billingFirstName,callback:function(t){e.$set(e.payment,"billingFirstName",t)},expression:"payment.billingFirstName"}}),n("label",{attrs:{for:"lastname"}},[e._v("Billing Last Name")]),n("b-form-input",{attrs:{id:"lastname",type:"text",placeholder:"Last Name eingeben...",trim:"",required:""},model:{value:e.payment.billingLastName,callback:function(t){e.$set(e.payment,"billingLastName",t)},expression:"payment.billingLastName"}}),n("label",{attrs:{for:"street"}},[e._v("Billing Street")]),n("b-form-input",{attrs:{id:"street",type:"text",placeholder:"Street eingeben...",trim:"",required:""},model:{value:e.payment.billingStreet,callback:function(t){e.$set(e.payment,"billingStreet",t)},expression:"payment.billingStreet"}}),n("label",{attrs:{for:"zip-code"}},[e._v("Billing Zip Code")]),n("b-form-input",{attrs:{id:"zip-code",type:"text",placeholder:"Zip Code eingeben...",trim:"",required:""},model:{value:e.payment.billingZipCode,callback:function(t){e.$set(e.payment,"billingZipCode",t)},expression:"payment.billingZipCode"}}),n("label",{attrs:{for:"location"}},[e._v("Billing Location")]),n("b-form-input",{attrs:{id:"location",type:"text",placeholder:"Location eingeben...",trim:"",required:""},model:{value:e.payment.billingLocation,callback:function(t){e.$set(e.payment,"billingLocation",t)},expression:"payment.billingLocation"}}),n("label",{attrs:{for:"paid-at"}},[e._v("Paid At")]),n("b-form-datepicker",{attrs:{id:"paid-at",placeholder:"Paid At eingeben...","value-as-date":!0},model:{value:e.paidAt,callback:function(t){e.paidAt=t},expression:"paidAt"}}),n("label",{attrs:{for:"payment-expires-at"}},[e._v("Payment Expires At")]),n("b-form-datepicker",{attrs:{id:"payment-expires-at",placeholder:"Payment Expires At eingeben...","value-as-date":!0},model:{value:e.paymentExpiresAt,callback:function(t){e.paymentExpiresAt=t},expression:"paymentExpiresAt"}}),n("div",{staticClass:"d-flex justify-content-between my-4"},[n("b-button",{attrs:{variant:"outline-danger"},on:{click:function(t){return t.preventDefault(),e.$router.go(-1)}}},[e._v(" Abbrechen ")]),n("b-button",{attrs:{variant:"success"},on:{click:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[e._v(" Speichern ")])],1)],1)],1)},o=[],r=n("1ba6"),s=n("c2f1"),p=n("2b0e");p["default"].component("b-form-datepicker",s["a"]);var m={name:"PaymentForm",data(){return{payment:{_id:this.$route.params.paymentId,user:null,job:null,coupon:null,status:"",invoiceNo:0,invoiceDate:(new Date).getTime(),paymentType:"invoice",pricingPackage:"",amount:0,fee:0,taxes:0,billingEmail:"",billingPhone:"",billingCompany:"",billingDepartment:"",billingGender:"",billingTitle:"",billingFirstName:"",billingLastName:"",billingStreet:"",billingZipCode:"",billingLocation:"",paidAt:(new Date).setHours(0),paymentExpiresAt:(new Date).setHours(24)+864e5*this.$config.payment.minDuration},contactGenderOptions:r["d"],contactTitleOptions:r["e"]}},computed:{invoiceDate:{get(){return new Date(this.payment.invoiceDate)},set(e){this.payment.invoiceDate=new Date(e).setHours(12)}},paidAt:{get(){return new Date(this.payment.paidAt)},set(e){this.payment.paidAt=new Date(e).valueOf()}},paymentExpiresAt:{get(){return new Date(this.payment.paymentExpiresAt)},set(e){this.payment.paymentExpiresAt=new Date(e).setHours(23)}}},created(){"new"!=this.$route.params.paymentId&&this.getPayment(this.$route.params.paymentId)},methods:{async getPayment(e){this.$store.dispatch("setOverlay",!0);try{const t=await this.$axios.get("/graphql",{params:{query:`\n              query {\n                payment (_id: "${e}") {\n                  _id\n                  user {\n                    _id\n                  }\n                  job {\n                    _id\n                  }\n                  status\n                  invoiceNo\n                  invoiceDate\n                  paymentType\n                  pricingPackage\n                  amount\n                  fee\n                  taxes\n                  billingEmail\n                  billingPhone\n                  billingCompany\n                  billingDepartment\n                  billingGender\n                  billingTitle\n                  billingFirstName\n                  billingLastName\n                  billingStreet\n                  billingZipCode\n                  billingLocation\n                  paidAt\n                  paymentExpiresAt\n                }\n              }\n            `}});if(t.data.errors)throw new Error("Payment could not be loaded!");t.data.data.payment.job=t.data.data.payment.job._id,t.data.data.payment.user=t.data.data.payment.user._id,t.data.data.payment.coupon=t.data.data.payment.coupon?t.data.data.payment.coupon._id:null,this.payment=t.data.data.payment}catch(t){this.$root.$bvToast.toast(t.message,{title:"Fehler beim Laden",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0})}this.$store.dispatch("setOverlay",!1)},async onSubmit(){this.$store.dispatch("setOverlay",!0);try{const e=this.payment._id&&"new"!=this.payment._id?"updatePayment":"addPayment",t=`\n          mutation {\n            ${e} (\n                ${"updatePayment"===e?`_id: "${this.payment._id}"`:""}\n                user: "${this.payment.user}"\n                job: "${this.payment.job}"\n                ${this.payment.coupon?`coupon: "${this.payment.coupon}"`:""}\n                status: "${this.payment.status}"\n                invoiceNo: ${this.payment.invoiceNo}\n                invoiceDate: ${this.payment.invoiceDate}\n                paymentType: "${this.payment.paymentType}"\n                pricingPackage: "${this.payment.pricingPackage}"\n                amount: ${this.payment.amount}\n                fee: ${this.payment.fee}\n                taxes: ${this.payment.taxes}\n                billingEmail: "${this.payment.billingEmail}"\n                billingPhone: "${this.payment.billingPhone}"\n                billingCompany: "${this.payment.billingCompany}"\n                billingDepartment: "${this.payment.billingDepartment}"\n                billingGender: "${this.payment.billingGender}"\n                billingTitle: "${this.payment.billingTitle}"\n                billingFirstName: "${this.payment.billingFirstName}"\n                billingLastName: "${this.payment.billingLastName}"\n                billingStreet: "${this.payment.billingStreet}"\n                billingZipCode: "${this.payment.billingZipCode}"\n                billingLocation: "${this.payment.billingLocation}"\n                paidAt: ${this.payment.paidAt}\n                paymentExpiresAt: ${this.payment.paymentExpiresAt}\n            ) {\n                _id\n            }\n          }\n        `,n=await this.$axios.post("/graphql",{query:t});if(n.data.errors)throw new Error("Error on saving payment!");this.$root.$bvToast.toast("Die Zahlung wurde erfolgreich gespeichert.",{title:"Zahlung gespeichert",variant:"success",toaster:"b-toaster-bottom-right",solid:!0}),this.$router.push("/admin/payments")}catch(e){this.$root.$bvToast.toast(e.message,{title:"Fehler beim Speichern",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0})}this.$store.dispatch("setOverlay",!1)}}},c=m,b=n("2877"),u=Object(b["a"])(c,l,o,!1,null,null,null),d=u.exports,y={name:"AdminEditPayment",components:{PaymentForm:d}},g=y,v=Object(b["a"])(g,a,i,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=ad_payment.19838a82.js.map