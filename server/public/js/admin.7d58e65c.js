(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{"0f1a":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"edit-job py-5"},[r("h2",[e._v("Stellenanzeige bearbeiten")]),r("JobForm",{attrs:{apiJobsSchema:"admin"}})],1)},a=[],o=r("13e7"),s={name:"AdminEditJob",components:{JobForm:o["a"]}},i=s,c=r("2877"),l=Object(c["a"])(i,n,a,!1,null,null,null);t["default"]=l.exports},2953:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("router-view")},a=[],o={name:"Admin"},s=o,i=r("2877"),c=Object(i["a"])(s,n,a,!1,null,null,null);t["default"]=c.exports},"49b3":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"edit-job py-5"},[r("h2",[e._v("Nutzer bearbeiten")]),r("AccountDataForm",{attrs:{apiUsersSchema:"admin"}})],1)},a=[],o=r("986e"),s={name:"AdminEditUser",components:{AccountDataForm:o["a"]}},i=s,c=r("2877"),l=Object(c["a"])(i,n,a,!1,null,null,null);t["default"]=l.exports},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var n=r("1d80"),a=r("5899"),o="["+a+"]",s=RegExp("^"+o+o+"*"),i=RegExp(o+o+"*$"),c=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(s,"")),2&e&&(r=r.replace(i,"")),r}};e.exports={start:c(1),end:c(2),trim:c(3)}},6966:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"dashboard py-5 px-3 px-md-5",attrs:{fluid:""}},[r("h2",[e._v("Admin")]),r("b-tabs",{attrs:{"content-class":"mt-3",value:e.query.tab}},[r("b-tab",{attrs:{title:"Jobs"},on:{click:function(t){return e.setQuery("tab",0)}}},[r("AllJobsListAdmin")],1),r("b-tab",{attrs:{title:"Companies"},on:{click:function(t){return e.setQuery("tab",1)}}},[r("AllCompaniesListAdmin")],1),r("b-tab",{attrs:{title:"Users"},on:{click:function(t){return e.setQuery("tab",2)}}},[r("AllUsersListAdmin")],1),r("b-tab",{attrs:{title:"Coupons"},on:{click:function(t){return e.setQuery("tab",3)}}},[r("AllCouponsListAdmin")],1),r("b-tab",{attrs:{title:"Subscribers"},on:{click:function(t){return e.setQuery("tab",4)}}},[r("AllSubscribersListAdmin")],1),r("b-tab",{attrs:{title:"Data Analytics"},on:{click:function(t){return e.setQuery("tab",5)}}})],1),r("Head",{attrs:{title:"Admin",desc:"",img:""}})],1)},a=[],o=r("ade3"),s=r("5530"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-form",{attrs:{id:"job-filter",inline:""},on:{submit:function(e){e.preventDefault()}}},[r("b-input-group",{staticClass:"my-2 mr-2"},[r("b-form-input",{attrs:{type:"text",placeholder:"Enter search term ..."},model:{value:e.filter.searchTerm,callback:function(t){e.$set(e.filter,"searchTerm",t)},expression:"filter.searchTerm"}}),r("b-input-group-append",[r("b-button",[r("Fa",{attrs:{icon:"times"},on:{click:function(t){t.preventDefault(),e.filter.searchTerm=""}}})],1)],1)],1),r("div",{staticClass:"inline-block ml-3 my-3 my-lg-0"},[e._v(" Number of Jobs: "),r("strong",[e._v(e._s(e.computedJobs.length))])])],1),r("b-table",{attrs:{responsive:"",striped:"",hover:"","sticky-header":"80vh","tbody-tr-class":e.rowClass,items:e.computedJobs,fields:e.fields,"primary-key":"_id"},scopedSlots:e._u([{key:"cell(user)",fn:function(t){return[e._v(" "+e._s(t.item.userId.lastName+", "+t.item.userId.firstName)+" "),r("a",{attrs:{href:"mailto:"+t.item.userId.email}},[e._v(" "+e._s(t.item.userId.email))])]}},{key:"cell(createdAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(updatedAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(paidAt)",fn:function(t){return[e._v(" "+e._s(t.value&&new Date(t.value).toLocaleString())+" ")]}},{key:"cell(applicationDeadline)",fn:function(t){return[e._v(" "+e._s(t.value&&new Date(t.value).toLocaleString())+" ")]}},{key:"cell(paidExpiresAt)",fn:function(t){return[e._v(" "+e._s(t.value&&new Date(t.value).toLocaleString())+" ")]}},{key:"cell(paidAmount)",fn:function(t){return[e._v(" "+e._s(t.value/100)+"€ ")]}},{key:"cell(location)",fn:function(t){return[e._v(" "+e._s(t.item.company.street+" "+t.item.company.location+" "+t.item.company.zipCode+" "+t.item.company.state+" "+t.item.company.country)+" ")]}},{key:"cell(actions)",fn:function(t){return[r("b-button",{staticClass:"mr-2 mb-2",attrs:{to:"/admin/jobs/edit/"+t.item._id,variant:"primary",size:"sm"}},[r("Fa",{attrs:{icon:"edit"}})],1),r("b-button",{staticClass:"mr-2 mb-2",attrs:{to:"/admin/jobs/preview/"+t.item._id,variant:"info",size:"sm"}},[r("Fa",{attrs:{scale:"1",icon:"eye"}})],1),r("b-dropdown",{staticClass:"mr-2 mb-2",attrs:{size:"sm",left:"",variant:"secondary"},scopedSlots:e._u([{key:"button-content",fn:function(){return[r("Fa",{staticClass:"mr-2",attrs:{icon:"ellipsis-v"}}),e._v(" Status ")]},proxy:!0}],null,!0)},[r("b-dropdown-item",{attrs:{active:"draft"===t.item.status,variant:"secondary"},on:{click:function(r){return r.preventDefault(),e.updateJob(t.item._id,"status","draft")}}},[e._v("Draft")]),r("b-dropdown-item",{attrs:{active:"invoice-pending"===t.item.status,variant:"secondary"},on:{click:function(r){return r.preventDefault(),e.updateJob(t.item._id,"status","invoice-pending")}}},[e._v("Invoice pending")]),r("b-dropdown-item",{attrs:{active:"published"===t.item.status,variant:"success"},on:{click:function(r){return r.preventDefault(),e.updateJob(t.item._id,"status","published")}}},[e._v("Published")]),r("b-dropdown-item",{attrs:{active:"unpublished"===t.item.status,variant:"danger"},on:{click:function(r){return r.preventDefault(),e.updateJob(t.item._id,"status","unpublished")}}},[e._v("Unpublished")])],1),r("b-dropdown",{staticClass:"mr-2 mb-2",attrs:{size:"sm",left:"",variant:"secondary"},scopedSlots:e._u([{key:"button-content",fn:function(){return[r("Fa",{staticClass:"mr-2",attrs:{icon:"credit-card"}}),e._v(" Paid Status ")]},proxy:!0}],null,!0)},[r("b-dropdown-item",{attrs:{active:!1===t.item.paid,variant:"danger"},on:{click:function(r){return r.preventDefault(),e.updateJob(t.item._id,"paid",!1)}}},[e._v("Unpaid")]),r("b-dropdown-item",{attrs:{active:!0===t.item.paid,variant:"success"},on:{click:function(r){return r.preventDefault(),e.updateJob(t.item._id,"paid",!0)}}},[e._v("Paid")])],1),r("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(r){return e.showDeleteJobModal(t.item)}}},[r("Fa",{staticClass:"mr-2",attrs:{icon:"trash-alt"}}),e._v("Delete ")],1)]}}])}),r("b-modal",{attrs:{id:"deleteJobModal",title:"Delete "+e.jobToDelete.title,"ok-title":"Delete Job",centered:"","ok-variant":"danger","footer-class":"d-flex justify-content-between"},on:{ok:function(t){return e.deleteJob(e.jobToDelete._id)}}},[r("p",{staticClass:"my-4"},[e._v(" Are you sure to delete this job? ")])]),r("b-alert",{staticClass:"position-fixed fixed-bottom m-0 rounded-0",staticStyle:{"z-index":"2000"},attrs:{variant:"warning",dismissible:""},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(" Oh, something went wrong. Please try again later. ")])],1)},c=[],l=(r("99af"),r("4de4"),r("4160"),r("caad"),r("d81d"),r("a434"),r("b0c0"),r("2532"),r("159b"),r("96cf"),r("1da1")),u=r("2909"),d={name:"AllJobsListAdmin",data:function(){return{jobs:[],jobToDelete:Object,error:!1,filter:{searchTerm:""},fields:[{key:"_id",label:"Job ID",sortable:!1},{key:"title",sortable:!0},{key:"createdAt",sortable:!0},{key:"updatedAt",sortable:!0},{key:"status",sortable:!0},{key:"paid",sortable:!0},{key:"paidAt",sortable:!0},{key:"paidExpiresAt",sortable:!0},{key:"paidAmount",sortable:!0},{key:"sentReminder",sortable:!0},{key:"refreshFrequency",sortable:!0},{key:"applicationDeadline",sortable:!0},{key:"company.name",label:"Company",sortable:!0},{key:"location",sortable:!0},{key:"userId._id",label:"User ID",sortable:!1},{key:"user",sortable:!0},{key:"actions",sortable:!1}]}},computed:{computedJobs:function(){var e=this,t=Object(u["a"])(this.jobs);return this.filter.searchTerm&&(t=t.filter((function(t){return e.checkForSearchTerm([t._id,t.title,t.company.name,t.company.street,t.company.location,t.company.zipCode,t.company.state,t.company.country,t.userId._id,t.userId.lastName,t.userId.firstName,t.userId.email],e.filter.searchTerm)?t:void 0}))),t}},created:function(){this.getAllJobs()},methods:{checkForSearchTerm:function(e,t){var r=!1;return e.forEach((function(e){e&&e.toLowerCase().includes(t.toLowerCase())&&(r=!0)})),r},getAllJobs:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setOverlay",!0),t.prev=1,t.next=4,e.$axios.post("/api/jobs/admin",{query:"\n                        query {\n                            jobs {\n                                _id\n                                createdAt\n                                updatedAt\n                                paidAt\n                                paidExpiresAt\n                                paidAmount\n                                refreshFrequency\n                                status\n                                applicationDeadline\n                                paid\n                                paidAt\n                                paidExpiresAt\n                                sentReminder\n                                title\n                                company {\n                                    name\n                                    street\n                                    location\n                                    state\n                                    zipCode\n                                    country\n                                }\n                                userId {\n                                    _id\n                                    createdAt\n                                    firstName\n                                    lastName\n                                    email\n                                }\n                            }\n                        }\n                    "});case 4:r=t.sent,e.jobs=r.data.data.jobs,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),e.error=!0,e.$root.$bvToast.toast("Jobs konnten nicht geladen werden. Error: ".concat(t.t0),{title:"Fehler beim Laden",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 12:e.$store.dispatch("setOverlay",!1);case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))()},updateJob:function(e,t,r){var n=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n.$store.dispatch("setOverlay",!0),a.prev=1,a.next=4,n.$axios.post("/api/jobs/admin",{query:'\n                        mutation {\n                            updateJob (_id: "'.concat(e,'", ').concat(t,": ").concat("string"===typeof r?'"'.concat(r,'"'):r,") {\n                                _id\n                                createdAt\n                                updatedAt\n                                paidAt\n                                paidExpiresAt\n                                status\n                                applicationDeadline\n                                paid\n                                paidAt\n                                paidExpiresAt\n                                title\n                                company {\n                                    name\n                                    street\n                                    location\n                                    state\n                                    zipCode\n                                    country\n                                }\n                                userId {\n                                    _id\n                                    createdAt\n                                    firstName\n                                    lastName\n                                    email\n                                }\n                            }\n                        }\n                    ")});case 4:o=a.sent,o.data.data.updateJob._id&&(n.jobs=n.jobs.map((function(e){return e._id===o.data.data.updateJob._id?o.data.data.updateJob:e}))),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),n.$root.$bvToast.toast("Der Job konnte nicht gespeichert werden. Error: ".concat(a.t0),{title:"Fehler beim Speichern",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 11:n.$store.dispatch("setOverlay",!1);case 12:case"end":return a.stop()}}),a,null,[[1,8]])})))()},showDeleteJobModal:function(e){this.jobToDelete=e,this.$bvModal.show("deleteJobModal")},deleteJob:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.$store.dispatch("setOverlay",!0),r.prev=1,r.next=4,t.$axios.post("/api/jobs/admin",{query:'\n                        mutation {\n                            deleteJob(_id: "'.concat(e,'") {\n                                status\n                            }\n                        }\n                    ')});case 4:n=r.sent,"deleted"===n.data.data.deleteJob.status?t.jobs.forEach((function(r,n){r._id===e&&t.jobs.splice(n,1)})):(t.error=!0,t.$root.$bvToast.toast("Der Job konnte nicht gelöscht werden.",{title:"Fehler beim Löschen",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0})),r.next=12;break;case 8:r.prev=8,r.t0=r["catch"](1),t.error=!0,t.$root.$bvToast.toast("Der Job konnte nicht gelöscht werden. Error: ".concat(r.t0),{title:"Fehler beim Löschen",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 12:t.$store.dispatch("setOverlay",!1);case 13:case"end":return r.stop()}}),r,null,[[1,8]])})))()},rowClass:function(e,t){if(e&&"row"===t)return"published"===e.status&&!0===e.paid&&e.paidExpiresAt>new Date&&new Date(e.applicationDeadline)>new Date((new Date).valueOf()-864e5)?"table-success":void 0}}},p=d,m=r("2877"),b=Object(m["a"])(p,i,c,!1,null,null,null),f=b.exports,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-form",{attrs:{id:"company-filter",inline:""},on:{submit:function(e){e.preventDefault()}}},[r("b-input-group",{staticClass:"my-2 mr-2"},[r("b-form-input",{attrs:{type:"text",placeholder:"Enter search term ..."},model:{value:e.filter.searchTerm,callback:function(t){e.$set(e.filter,"searchTerm",t)},expression:"filter.searchTerm"}}),r("b-input-group-append",[r("b-button",[r("Fa",{attrs:{icon:"times"},on:{click:function(t){t.preventDefault(),e.filter.searchTerm=""}}})],1)],1)],1),r("div",{staticClass:"inline-block ml-3 my-3 my-lg-0"},[e._v(" Number of Companies: "),r("strong",[e._v(e._s(e.computedCompanies.length))])])],1),r("b-table",{attrs:{responsive:"",striped:"",hover:"","sticky-header":"80vh",items:e.computedCompanies,fields:e.fields,"primary-key":"_id"},scopedSlots:e._u([{key:"cell(user)",fn:function(t){return[e._v(" "+e._s(t.item.userId.lastName+", "+t.item.userId.firstName)+" "),r("a",{attrs:{href:"mailto:"+t.item.userId.email}},[e._v(" "+e._s(t.item.userId.email))])]}},{key:"cell(createdAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(updatedAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(numberOfJobs)",fn:function(t){return[e._v(" "+e._s(e.jobs.filter((function(e){return e.company._id===t.item._id})).length)+" ")]}},{key:"cell(location)",fn:function(t){return[e._v(" "+e._s(t.item.street+" "+t.item.location+" "+t.item.zipCode+" "+t.item.state+" "+t.item.country)+" ")]}},{key:"cell(actions)",fn:function(t){return[r("b-button",{staticClass:"mr-2 mb-2",attrs:{to:"/admin/companies/edit/"+t.item._id,variant:"primary",size:"sm"}},[r("Fa",{staticClass:"mr-2",attrs:{icon:"edit"}}),e._v("Edit ")],1),r("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(r){return e.showDeleteCompanyModal(t.item)}}},[r("Fa",{staticClass:"mr-2",attrs:{icon:"trash-alt"}}),e._v(" Delete ")],1)]}}])}),r("b-modal",{attrs:{id:"deleteCompanyModal",title:"Delete "+e.companyToDelete.name,"ok-title":"Delete Company",centered:"","ok-variant":"danger","footer-class":"d-flex justify-content-between"},on:{ok:function(t){return e.deleteCompany(e.companyToDelete._id)}}},[r("p",{staticClass:"my-4"},[e._v(" Are you sure to delete this company? ")])]),r("b-alert",{staticClass:"position-fixed fixed-bottom m-0 rounded-0",staticStyle:{"z-index":"2000"},attrs:{variant:"warning",dismissible:""},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(" Oh, something went wrong. Please try again later. ")])],1)},v=[],y={name:"AllCompaniesListAdmin",data:function(){return{companies:[],jobs:[],companyToDelete:Object,error:!1,filter:{searchTerm:""},fields:[{key:"_id",label:"Company ID",sortable:!1},{key:"name",sortable:!0},{key:"createdAt",sortable:!0},{key:"updatedAt",sortable:!0},{key:"location",sortable:!1},{key:"numberOfJobs",sortable:!1},{key:"userId._id",label:"User ID",sortable:!1},{key:"user",sortable:!1},{key:"actions",sortable:!1}]}},computed:{computedCompanies:function(){var e=this,t=Object(u["a"])(this.companies);return this.filter.searchTerm&&(t=t.filter((function(t){return e.checkForSearchTerm([t._id,t.name,t.street,t.location,t.zipCode,t.state,t.country,t.userId._id,t.userId.lastName,t.userId.firstName,t.userId.email],e.filter.searchTerm)?t:void 0}))),t}},created:function(){this.getAllCompanies(),this.getAllJobs()},methods:{checkForSearchTerm:function(e,t){var r=!1;return e.forEach((function(e){e&&e.toLowerCase().includes(t.toLowerCase())&&(r=!0)})),r},getAllJobs:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setOverlay",!0),t.prev=1,t.next=4,e.$axios.post("/api/jobs/admin",{query:"\n                        query {\n                            jobs {\n                                company {\n                                    _id\n                                }\n                            }\n                        }\n                    "});case 4:r=t.sent,e.jobs=r.data.data.jobs,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),e.error=!0,e.$root.$bvToast.toast("Jobs konnten nicht geladen werden. Error: ".concat(t.t0),{title:"Fehler beim Laden",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 12:e.$store.dispatch("setOverlay",!1);case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))()},getAllCompanies:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setOverlay",!0),t.prev=1,t.next=4,e.$axios.post("/api/companies/admin",{query:"\n                        query {\n                            companies {\n                                _id\n                                createdAt\n                                updatedAt\n                                name\n                                street\n                                location\n                                state\n                                zipCode\n                                country\n                                userId {\n                                    _id\n                                    createdAt\n                                    firstName\n                                    lastName\n                                    email\n                                }\n                            }\n                        }\n                    "});case 4:r=t.sent,e.companies=r.data.data.companies,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),e.error=!0,e.$root.$bvToast.toast("Unternehmen konnten nicht geladen werden. Error: ".concat(t.t0),{title:"Fehler beim Laden",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 12:e.$store.dispatch("setOverlay",!1);case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))()},updateCompany:function(e,t,r){var n=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n.$store.dispatch("setOverlay",!0),a.prev=1,a.next=4,n.$axios.post("/api/companies/admin",{query:'\n                        mutation {\n                            updateCompany (_id: "'.concat(e,'", ').concat(t,": ").concat("string"===typeof r?'"'.concat(r,'"'):r,") {\n                                _id\n                                createdAt\n                                updatedAt\n                                name\n                                street\n                                location\n                                state\n                                zipCode\n                                country                         \n                                userId {\n                                    _id\n                                    createdAt\n                                    firstName\n                                    lastName\n                                    email\n                                }\n                            }\n                        }\n                    ")});case 4:o=a.sent,o.data.data.updateCompany._id&&(n.companies=n.companies.map((function(e){return e._id===o.data.data.updateCompany._id?o.data.data.updateCompany:e}))),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),n.$root.$bvToast.toast("Unternehmen konnten nicht gespeichert werden. Error: ".concat(a.t0),{title:"Fehler beim Speichern",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 11:n.$store.dispatch("setOverlay",!1);case 12:case"end":return a.stop()}}),a,null,[[1,8]])})))()},showDeleteCompanyModal:function(e){this.companyToDelete=e,this.$bvModal.show("deleteCompanyModal")},deleteCompany:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.$store.dispatch("setOverlay",!0),r.prev=1,r.next=4,t.$axios.post("/api/companies/admin",{query:'\n                        mutation {\n                            deleteCompany(_id: "'.concat(e,'") {\n                                name\n                            }\n                        }\n                    ')});case 4:n=r.sent,"deleted"===n.data.data.deleteCompany.name?t.companies.forEach((function(r,n){r._id===e&&t.companies.splice(n,1)})):(t.error=!0,t.$root.$bvToast.toast("Das Unternehmen konnte nicht gelöscht werden.",{title:"Fehler beim Löschen",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0})),r.next=12;break;case 8:r.prev=8,r.t0=r["catch"](1),t.error=!0,t.$root.$bvToast.toast("Das Unternehmen konnte nicht gelöscht werden. Error: ".concat(r.t0),{title:"Fehler beim Löschen",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 12:t.$store.dispatch("setOverlay",!1);case 13:case"end":return r.stop()}}),r,null,[[1,8]])})))()}}},_=y,k=Object(m["a"])(_,h,v,!1,null,null,null),g=k.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-form",{attrs:{id:"user-filter",inline:""},on:{submit:function(e){e.preventDefault()}}},[r("b-input-group",{staticClass:"my-2 mr-2"},[r("b-form-input",{attrs:{type:"text",placeholder:"Enter search term ..."},model:{value:e.filter.searchTerm,callback:function(t){e.$set(e.filter,"searchTerm",t)},expression:"filter.searchTerm"}}),r("b-input-group-append",[r("b-button",[r("Fa",{attrs:{icon:"times"},on:{click:function(t){t.preventDefault(),e.filter.searchTerm=""}}})],1)],1)],1),r("div",{staticClass:"inline-block ml-3 my-3 my-lg-0"},[e._v(" Number of Users: "),r("strong",[e._v(e._s(e.computedUsers.length))])])],1),r("b-table",{attrs:{responsive:"",striped:"",hover:"","sticky-header":"80vh",items:e.computedUsers,fields:e.fields,"primary-key":"_id"},scopedSlots:e._u([{key:"cell(email)",fn:function(t){return[r("a",{attrs:{href:"mailto:"+t.item.email}},[e._v(" "+e._s(t.item.email))])]}},{key:"cell(createdAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(updatedAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(actions)",fn:function(t){return[r("b-button",{staticClass:"mr-2 mb-2",attrs:{to:"/admin/users/edit/"+t.item._id,variant:"primary",size:"sm"}},[r("Fa",{staticClass:"mr-2",attrs:{icon:"edit"}}),e._v("Edit ")],1),r("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(r){return e.showDeleteUserModal(t.item)}}},[r("Fa",{staticClass:"mr-2",attrs:{icon:"trash-alt"}}),e._v("Delete ")],1)]}}])}),r("b-modal",{attrs:{id:"deleteUserModal",title:"Delete "+e.userToDelete.email,"ok-title":"Delete User",centered:"","ok-variant":"danger","footer-class":"d-flex justify-content-between"},on:{ok:function(t){return e.deleteUser(e.userToDelete._id)}}},[r("p",{staticClass:"my-4"},[e._v(" Are you sure to delete this user? ")])]),r("b-alert",{staticClass:"position-fixed fixed-bottom m-0 rounded-0",staticStyle:{"z-index":"2000"},attrs:{variant:"warning",dismissible:""},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(" Oh, something went wrong. Please try again later. ")])],1)},x=[],A={name:"AllUsersListAdmin",data:function(){return{users:[],userToDelete:Object,error:!1,filter:{searchTerm:""},fields:[{key:"_id",label:"User ID",sortable:!1},{key:"firstName",sortable:!0},{key:"lastName",sortable:!0},{key:"email",sortable:!0},{key:"createdAt",sortable:!0},{key:"updatedAt",sortable:!0},{key:"status",sortable:!0},{key:"role",sortable:!0},{key:"actions",sortable:!1}]}},computed:{computedUsers:function(){var e=this,t=Object(u["a"])(this.users);return this.filter.searchTerm&&(t=t.filter((function(t){return e.checkForSearchTerm([t._id,t.lastName,t.firstName,t.email],e.filter.searchTerm)?t:void 0}))),t}},created:function(){this.getAllUsers()},methods:{checkForSearchTerm:function(e,t){var r=!1;return e.forEach((function(e){e&&e.toLowerCase().includes(t.toLowerCase())&&(r=!0)})),r},getAllUsers:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setOverlay",!0),t.prev=1,t.next=4,e.$axios.post("/api/user/admin",{query:"\n                        query {\n                            users {\n                                _id\n                                createdAt\n                                updatedAt\n                                firstName\n                                lastName\n                                email\n                                status\n                                role\n                            }\n                        }\n                    "});case 4:r=t.sent,e.users=r.data.data.users,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),e.error=!0,e.$root.$bvToast.toast("Users konnten nicht geladen werden. Error: ".concat(t.t0),{title:"Fehler beim Laden",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 12:e.$store.dispatch("setOverlay",!1);case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))()},showDeleteUserModal:function(e){this.userToDelete=e,this.$bvModal.show("deleteUserModal")},deleteUser:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.$store.dispatch("setOverlay",!0),r.prev=1,r.next=4,t.$axios.post("/api/user/admin",{query:'\n                        mutation {\n                            deleteUser(_id: "'.concat(e,'") {\n                                firstName\n                            }\n                        }\n                    ')});case 4:n=r.sent,"deleted"===n.data.data.deleteUser.firstName?t.users.forEach((function(r,n){r._id===e&&t.users.splice(n,1)})):(t.error=!0,t.$root.$bvToast.toast("Der User konnte nicht gelöscht werden.",{title:"Fehler beim Löschen",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0})),r.next=12;break;case 8:r.prev=8,r.t0=r["catch"](1),t.error=!0,t.$root.$bvToast.toast("Der User konnte nicht gelöscht werden. Error: ".concat(r.t0),{title:"Fehler beim Löschen",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 12:t.$store.dispatch("setOverlay",!1);case 13:case"end":return r.stop()}}),r,null,[[1,8]])})))()}}},C=A,$=Object(m["a"])(C,w,x,!1,null,null,null),D=$.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-button",{staticClass:"mb-3",attrs:{to:"/admin/coupons/edit/new",variant:"outline-primary"}},[r("Fa",{staticClass:"mr-2",attrs:{icon:"plus"}}),e._v("New Coupon")],1),r("b-form",{attrs:{id:"coupon-filter",inline:""},on:{submit:function(e){e.preventDefault()}}},[r("b-input-group",{staticClass:"my-2 mr-2"},[r("b-form-input",{attrs:{type:"text",placeholder:"Enter search term ..."},model:{value:e.filter.searchTerm,callback:function(t){e.$set(e.filter,"searchTerm",t)},expression:"filter.searchTerm"}}),r("b-input-group-append",[r("b-button",[r("Fa",{attrs:{icon:"times"},on:{click:function(t){t.preventDefault(),e.filter.searchTerm=""}}})],1)],1)],1)],1),r("b-table",{attrs:{responsive:"",striped:"",hover:"","sticky-header":"80vh",items:e.computedCoupons,fields:e.fields,"primary-key":"_id"},scopedSlots:e._u([{key:"cell(user)",fn:function(t){return[t.item.userId?r("div",[e._v(" "+e._s(t.item.userId.lastName+", "+t.item.userId.firstName)+" "),r("a",{attrs:{href:"mailto:"+t.item.userId.email}},[e._v(" "+e._s(t.item.userId.email))])]):e._e()]}},{key:"cell(createdAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(updatedAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(expireAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(actions)",fn:function(t){return[r("b-button",{staticClass:"mr-2 mb-2",attrs:{to:"/admin/coupons/"+t.item._id,variant:"primary",size:"sm"}},[r("Fa",{attrs:{icon:"edit"}})],1),r("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(r){return e.showDeleteCouponModal(t.item)}}},[r("Fa",{staticClass:"mr-2",attrs:{icon:"trash-alt"}}),e._v("Delete ")],1)]}}])}),r("b-modal",{attrs:{id:"deleteCouponModal",title:"Delete "+e.couponToDelete.code,"ok-title":"Delete Coupon",centered:"","ok-variant":"danger","footer-class":"d-flex justify-content-between"},on:{ok:function(t){return e.deleteCoupon(e.couponToDelete._id)}}},[r("p",{staticClass:"my-4"},[e._v(" Are you sure to delete this coupon? ")])]),r("b-alert",{staticClass:"position-fixed fixed-bottom m-0 rounded-0",staticStyle:{"z-index":"2000"},attrs:{variant:"warning",dismissible:""},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(" Oh, something went wrong. Please try again later. ")])],1)},S=[],I=(r("d3b7"),r("25f0"),{name:"AllCouponsListAdmin",data:function(){return{coupons:[],couponToDelete:Object,error:!1,filter:{searchTerm:""},fields:[{key:"_id",label:"Coupon ID",sortable:!1},{key:"code",sortable:!1},{key:"discount",sortable:!0},{key:"usage",sortable:!0},{key:"refreshFrequency",sortable:!0},{key:"userId._id",label:"User ID",sortable:!1},{key:"user",sortable:!0},{key:"createdAt",sortable:!0},{key:"updatedAt",sortable:!0},{key:"expireAt",label:"Expires at",sortable:!0},{key:"actions",sortable:!1}]}},computed:{computedCoupons:function(){var e=this,t=Object(u["a"])(this.coupons);return this.filter.searchTerm&&(t=t.filter((function(t){return e.checkForSearchTerm([t._id,t.code,t.discount,t.userId&&t.userId._id,t.userId&&t.userId.firstName,t.userId&&t.userId.lastName,t.userId&&t.userId.email],e.filter.searchTerm)?t:void 0}))),t}},created:function(){this.getAllCoupons()},methods:{checkForSearchTerm:function(e,t){var r=!1;return e.forEach((function(e){e&&e.toString().toLowerCase().includes(t.toLowerCase())&&(r=!0)})),r},getAllCoupons:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setOverlay",!0),t.prev=1,t.next=4,e.$axios.post("/api/coupons/admin",{query:"\n                        query {\n                            coupons {\n                                _id\n                                code\n                                discount\n                                refreshFrequency\n                                usage\n                                createdAt\n                                updatedAt\n                                expireAt\n                                userId {\n                                    _id\n                                    firstName\n                                    lastName\n                                    email\n                                }\n                            }\n                        }\n                    "});case 4:r=t.sent,e.coupons=r.data.data.coupons,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),e.error=!0,e.$root.$bvToast.toast("Codes konnten nicht geladen werden.",{title:"Fehler beim Laden",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 12:e.$store.dispatch("setOverlay",!1);case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))()},showDeleteCouponModal:function(e){this.couponToDelete=e,this.$bvModal.show("deleteCouponModal")},deleteCoupon:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.$store.dispatch("setOverlay",!0),r.prev=1,r.next=4,t.$axios.post("/api/coupons/admin",{query:'\n                        mutation {\n                            deleteCoupon(_id: "'.concat(e,'") {\n                                code\n                            }\n                        }\n                    ')});case 4:n=r.sent,"deleted"===n.data.data.deleteCoupon.code?t.coupons.forEach((function(r,n){r._id===e&&t.coupons.splice(n,1)})):(t.error=!0,t.$root.$bvToast.toast("Der Code konnte nicht gelöscht werden.",{title:"Fehler beim Löschen",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0})),r.next=12;break;case 8:r.prev=8,r.t0=r["catch"](1),t.error=!0,t.$root.$bvToast.toast("Der Code konnte nicht gelöscht werden. Error: ".concat(r.t0),{title:"Fehler beim Löschen",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 12:t.$store.dispatch("setOverlay",!1);case 13:case"end":return r.stop()}}),r,null,[[1,8]])})))()}}}),O=I,j=Object(m["a"])(O,T,S,!1,null,null,null),F=j.exports,E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-form",{attrs:{id:"subscriber-filter",inline:""},on:{submit:function(e){e.preventDefault()}}},[r("b-input-group",{staticClass:"my-2 mr-3"},[r("b-form-input",{attrs:{type:"text",placeholder:"Enter search term ..."},model:{value:e.filter.searchTerm,callback:function(t){e.$set(e.filter,"searchTerm",t)},expression:"filter.searchTerm"}}),r("b-input-group-append",[r("b-button",[r("Fa",{attrs:{icon:"times"},on:{click:function(t){t.preventDefault(),e.filter.searchTerm=""}}})],1)],1)],1),r("div",{staticClass:"inline-block mr-5 ml-3 ml-lg-0 my-3 my-lg-0"},[e._v(" Number of Subscribers: "),r("strong",[e._v(e._s(e.computedSubscribers.length))])]),r("b-button",{staticClass:"d-none d-lg-inline-block",attrs:{variant:e.newsletterSent?"success":"danger",disabled:!e.sendNewsletterActive,size:"sm"},on:{click:function(t){return t.preventDefault(),e.sendNewsletter(t)}}},[e._v(" "+e._s(e.newsletterSent?"Newsletter Sent":"Send Newsletter now")+" ")]),r("b-input-group",{staticClass:"d-none d-lg-flex my-2 mr-3"},[r("b-form-input",{staticClass:"ml-2",staticStyle:{width:"95px"},attrs:{type:"number",placeholder:"daysBack"},model:{value:e.daysBack,callback:function(t){e.daysBack=t},expression:"daysBack"}}),r("b-input-group-append",[r("b-button",{attrs:{variant:"dark",size:"sm"}},[e._v("daysBack")])],1)],1),r("b-form-checkbox",{staticClass:"d-none d-lg-flex my-2 mr-3",attrs:{name:"check-button",switch:""},model:{value:e.sendNewsletterActive,callback:function(t){e.sendNewsletterActive=t},expression:"sendNewsletterActive"}},[e._v(" enabled ")]),r("b-button",{staticClass:"d-none d-lg-flex my-2 mr-3",attrs:{variant:"primary",size:"sm"},on:{click:e.emailsToClipboard}},[e._v("Copy all emails")])],1),r("b-table",{attrs:{responsive:"",striped:"",hover:"","sticky-header":"80vh",items:e.computedSubscribers,fields:e.fields,"primary-key":"_id"},scopedSlots:e._u([{key:"cell(email)",fn:function(t){return[r("a",{attrs:{href:"mailto:"+t.item.email}},[e._v(" "+e._s(t.item.email))])]}},{key:"cell(createdAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(updatedAt)",fn:function(t){return[e._v(" "+e._s(new Date(t.value).toLocaleString())+" ")]}},{key:"cell(actions)",fn:function(t){return[r("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(r){return e.showDeleteSubscriberModal(t.item)}}},[r("Fa",{staticClass:"mr-2",attrs:{icon:"trash-alt"}}),e._v("Delete ")],1)]}}])}),r("b-modal",{attrs:{id:"deleteSubscriberModal",title:"Delete "+e.subscriberToDelete.email,"ok-title":"Delete Subscriber",centered:"","ok-variant":"danger","footer-class":"d-flex justify-content-between"},on:{ok:function(t){return e.deleteSubscriber(e.subscriberToDelete._id)}}},[r("p",{staticClass:"my-4"},[e._v(" Are you sure to delete this subscriber? ")])]),r("b-alert",{staticClass:"position-fixed fixed-bottom m-0 rounded-0",staticStyle:{"z-index":"2000"},attrs:{variant:"warning",dismissible:""},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(" Oh, something went wrong. Please try again later. ")])],1)},N=[],L=(r("a15b"),{name:"AllSubscribersListAdmin",data:function(){return{subscribers:[],subscriberToDelete:Object,error:!1,filter:{searchTerm:""},daysBack:7,sendNewsletterActive:!1,fields:[{key:"_id",label:"Subscriber ID",sortable:!1},{key:"email",sortable:!0},{key:"state",sortable:!0},{key:"createdAt",sortable:!0},{key:"updatedAt",sortable:!0},{key:"status",sortable:!0},{key:"actions",sortable:!1}],newsletterSent:!1}},computed:{computedSubscribers:function(){var e=this,t=Object(u["a"])(this.subscribers);return this.filter.searchTerm&&(t=t.filter((function(t){return e.checkForSearchTerm([t._id,t.lastName,t.firstName,t.email],e.filter.searchTerm)?t:void 0}))),t}},created:function(){this.getAllSubscribers()},methods:{checkForSearchTerm:function(e,t){var r=!1;return e.forEach((function(e){e&&e.toLowerCase().includes(t.toLowerCase())&&(r=!0)})),r},getAllSubscribers:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setOverlay",!0),t.prev=1,t.next=4,e.$axios.post("/api/subscriber/admin",{query:"\n                        query {\n                            subscribers {\n                                _id\n                                createdAt\n                                updatedAt\n                                email\n                                state\n                                status\n                            }\n                        }\n                    "});case 4:r=t.sent,e.subscribers=r.data.data.subscribers,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.error=!0;case 11:e.$store.dispatch("setOverlay",!1);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()},showDeleteSubscriberModal:function(e){this.subscriberToDelete=e,this.$bvModal.show("deleteSubscriberModal")},deleteSubscriber:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.$store.dispatch("setOverlay",!0),r.prev=1,r.next=4,t.$axios.post("/api/subscriber/admin",{query:'\n                        mutation {\n                            deleteSubscriber(_id: "'.concat(e,'") {\n                                status\n                            }\n                        }\n                    ')});case 4:n=r.sent,"deleted"===n.data.data.deleteSubscriber.status?t.subscribers.forEach((function(r,n){r._id===e&&t.subscribers.splice(n,1)})):t.error=!0,r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),t.error=!0;case 11:t.$store.dispatch("setOverlay",!1);case 12:case"end":return r.stop()}}),r,null,[[1,8]])})))()},sendNewsletter:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setOverlay",!0),t.next=3,e.$axios.post("/api/newsletter/send",{daysBack:e.daysBack});case 3:r=t.sent,e.newsletterSent=r.data.success,e.sendNewsletterActive=!1,e.$store.dispatch("setOverlay",!1);case 7:case"end":return t.stop()}}),t)})))()},emailsToClipboard:function(){var e=document.createElement("textarea");e.value=this.subscribers.filter((function(e){return"active"===e.status})).map((function(e){return e.email})).join("; "),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}}),J=L,q=Object(m["a"])(J,E,N,!1,null,null,null),U=q.exports,R={name:"AdminHome",components:{AllJobsListAdmin:f,AllCompaniesListAdmin:g,AllUsersListAdmin:D,AllCouponsListAdmin:F,AllSubscribersListAdmin:U},data:function(){return{query:{tab:parseInt(this.$route.query.tab)||0}}},methods:{setQuery:function(e,t){this.query[e]=t,this.$router.push({query:Object(s["a"])(Object(s["a"])({},this.$route.query),{},Object(o["a"])({},e,t))})}}},z=R,M=Object(m["a"])(z,n,a,!1,null,null,null);t["default"]=M.exports},7156:function(e,t,r){var n=r("861d"),a=r("d2bb");e.exports=function(e,t,r){var o,s;return a&&"function"==typeof(o=t.constructor)&&o!==r&&n(s=o.prototype)&&s!==r.prototype&&a(e,s),e}},a15b:function(e,t,r){"use strict";var n=r("23e7"),a=r("44ad"),o=r("fc6a"),s=r("a640"),i=[].join,c=a!=Object,l=s("join",",");n({target:"Array",proto:!0,forced:c||!l},{join:function(e){return i.call(o(this),void 0===e?",":e)}})},a9e3:function(e,t,r){"use strict";var n=r("83ab"),a=r("da84"),o=r("94ca"),s=r("6eeb"),i=r("5135"),c=r("c6b6"),l=r("7156"),u=r("c04e"),d=r("d039"),p=r("7c73"),m=r("241c").f,b=r("06cf").f,f=r("9bf2").f,h=r("58a8").trim,v="Number",y=a[v],_=y.prototype,k=c(p(_))==v,g=function(e){var t,r,n,a,o,s,i,c,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=h(l),t=l.charCodeAt(0),43===t||45===t){if(r=l.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+l}for(o=l.slice(2),s=o.length,i=0;i<s;i++)if(c=o.charCodeAt(i),c<48||c>a)return NaN;return parseInt(o,n)}return+l};if(o(v,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var w,x=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof x&&(k?d((function(){_.valueOf.call(r)})):c(r)!=v)?l(new y(g(t)),r,x):g(t)},A=n?m(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;A.length>C;C++)i(y,w=A[C])&&!i(x,w)&&f(x,w,b(y,w));x.prototype=_,_.constructor=x,s(a,v,x)}},da34:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"edit-company py-5"},[r("h2",[e._v("Unternehmen bearbeiten")]),r("CompanyForm",{attrs:{apiJobsSchema:"admin"}})],1)},a=[],o=r("1ce6"),s={name:"AdminEditCompany",components:{CompanyForm:o["a"]}},i=s,c=r("2877"),l=Object(c["a"])(i,n,a,!1,null,null,null);t["default"]=l.exports},de84:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"new-job py-5"},[r("h2",[e._v("Add/Update Coupon")]),r("CouponForm",{attrs:{couponId:"new"===e.$route.params.couponId?null:e.$route.params.couponId}})],1)},a=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"coupon-form position-relative"},[r("b-form",{attrs:{id:"coupon-form"}},[r("label",{attrs:{for:"code"}},[e._v("Code *")]),r("b-form-input",{attrs:{type:"text",state:e.validated?!!e.coupon.code:null,id:"coupon-code",placeholder:"Enter coupon code ...",required:""},model:{value:e.coupon.code,callback:function(t){e.$set(e.coupon,"code",t)},expression:"coupon.code"}}),r("label",{attrs:{for:"discount"}},[e._v("Discount *")]),r("b-form-input",{attrs:{type:"number",number:"",min:"0",max:"1",step:"0.01",state:e.validated?!!e.coupon.discount:null,id:"discount",placeholder:"Enter discount ...",required:""},model:{value:e.coupon.discount,callback:function(t){e.$set(e.coupon,"discount",t)},expression:"coupon.discount"}}),r("label",{attrs:{for:"refresh-frequency"}},[e._v("Refrech Frequency *")]),r("b-form-input",{attrs:{type:"number",number:"",min:"0",step:"1",state:e.validated?!!e.coupon.refreshFrequency:null,id:"refresh-frequency",placeholder:"Refresh ad after X days...",required:""},model:{value:e.coupon.refreshFrequency,callback:function(t){e.$set(e.coupon,"refreshFrequency",t)},expression:"coupon.refreshFrequency"}}),r("label",{attrs:{for:"usage"}},[e._v("Usage")]),r("b-form-select",{attrs:{id:"usage",state:!!e.validated||null},model:{value:e.coupon.usage,callback:function(t){e.$set(e.coupon,"usage",t)},expression:"coupon.usage"}},[r("b-form-select-option",{attrs:{value:"unlimited"}},[e._v("unlimited")]),r("b-form-select-option",{attrs:{value:"single"}},[e._v("single")]),r("b-form-select-option",{attrs:{value:"singlePerUser"}},[e._v("Single per User")])],1),r("label",{attrs:{for:"user-id"}},[e._v("User ID")]),r("b-form-input",{attrs:{type:"text",state:!!e.validated||null,id:"user-id",placeholder:"Enter User ID ..."},model:{value:e.coupon.userId._id,callback:function(t){e.$set(e.coupon.userId,"_id",t)},expression:"coupon.userId._id"}}),r("label",{attrs:{for:"expire-at"}},[e._v("Expiration Date")]),r("b-form-datepicker",{attrs:{"value-as-date":!0,state:!(!e.validated||!e.coupon.expireAt)||null,id:"expire-at",placeholder:"Choose a date"},model:{value:e.coupon.expireAt,callback:function(t){e.$set(e.coupon,"expireAt",t)},expression:"coupon.expireAt"}}),r("div",{staticClass:"d-flex justify-content-between my-4"},[r("b-button",{attrs:{variant:"outline-danger",to:"/admin?tab=3"}},[e._v(" Cancel ")]),r("b-button",{attrs:{variant:"success"},on:{click:function(t){return t.preventDefault(),e.onSubmit(t)}}},[e.success?r("Fa",{staticClass:"mr-2",attrs:{icon:"check"}}):e._e(),e._v(" "+e._s(e.success?"Done":"Save")+" ")],1)],1)],1),e.error?r("b-alert",{staticClass:"mt-3",attrs:{show:"",dismissible:"",variant:"warning"}},[e._v(e._s(e.error))]):e._e()],1)},s=[],i=(r("99af"),r("a9e3"),r("96cf"),r("1da1")),c={name:"CouponForm",props:["couponId"],data:function(){return{coupon:{_id:"",code:"",discount:0,refreshFrequency:0,usage:"unlimited",expireAt:null,userId:{_id:null}},validated:null,success:"",error:""}},created:function(){this.couponId&&this.getCoupon(this.couponId)},methods:{getCoupon:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$axios.post("/api/coupons/admin",{query:'\n                        query {\n                            coupon(_id: "'.concat(e,'") {\n                                _id\n                                code\n                                discount\n                                refreshFrequency\n                                usage\n                                expireAt\n                                userId {\n                                    _id\n                                }\n                            }\n                        }\n                    ')});case 3:n=r.sent,n.data.data.coupon.userId||(n.data.data.coupon.userId={_id:null}),n.data.data.coupon.expireAt?n.data.data.coupon.expireAt=new Date(n.data.data.coupon.expireAt):n.data.data.coupon.expireAt=null,t.coupon=n.data.data.coupon,r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),t.$root.$bvToast.toast("Beim Laden des Coupons ist ein Fehler aufgetreten.",{title:"Fehler beim Laden",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},onSubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.error=!1,e.formValidation()){t.next=4;break}return e.error="Please provide all necessary information.",t.abrupt("return",null);case 4:return e.$store.dispatch("setOverlay",!0),t.prev=5,r=e.couponId?"updateCoupon":"addCoupon",n="\n                    mutation {\n                        ".concat(r,"(\n                            ").concat("updateCoupon"===r?'_id: "'.concat(e.couponId,'"'):"",'\n                            code: "').concat(e.coupon.code,'"\n                            discount: ').concat(e.coupon.discount,"\n                            refreshFrequency: ").concat(e.coupon.refreshFrequency,'\n                            usage: "').concat(e.coupon.usage,'"\n                            ').concat(e.coupon.expireAt?"expireAt: ".concat(Number(e.coupon.expireAt)):"","\n                            ").concat(e.coupon.userId._id?'userId: "'.concat(e.coupon.userId._id,'"'):"","\n                        ) {\n                            _id\n                        }\n                    }\n                "),t.next=10,e.$axios.post("/api/coupons/admin",{query:n});case 10:a=t.sent,a.data.data[r]?(e.success=!0,e.$root.$bvToast.toast("Der Coupon wurde erfolgreich gespeichert.",{title:"Coupon gespeichert",variant:"success",toaster:"b-toaster-bottom-right",solid:!0}),e.$router.go(-1)):e.$root.$bvToast.toast("Beim Speichern des Coupons ist ein Fehler aufgetreten.",{title:"Fehler beim Speichern",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0}),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](5),e.$root.$bvToast.toast("Beim Speichern des Coupons ist ein Fehler aufgetreten.",{title:"Fehler beim Speichern",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 17:e.$store.dispatch("setOverlay",!1);case 18:case"end":return t.stop()}}),t,null,[[5,14]])})))()},formValidation:function(){return this.validated=!0,!(!this.coupon.code||!this.coupon.discount&&!this.coupon.refreshFrequency)},formReset:function(){for(var e in this.coupon)this.coupon[e]=""},hasHistory:function(){return window.history.length>2}}},l=c,u=r("2877"),d=Object(u["a"])(l,o,s,!1,null,null,null),p=d.exports,m={name:"AdminCouponView",components:{CouponForm:p}},b=m,f=Object(u["a"])(b,n,a,!1,null,null,null);t["default"]=f.exports},f954:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"jobpage py-5"},[r("Job",{attrs:{apiJobsSchema:"admin"}})],1)},a=[],o=r("890f"),s={name:"AdminJobPreview",components:{Job:o["a"]}},i=s,c=r("2877"),l=Object(c["a"])(i,n,a,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=admin.7d58e65c.js.map