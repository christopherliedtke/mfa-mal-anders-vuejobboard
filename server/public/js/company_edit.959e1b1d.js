(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["company_edit"],{"1ce6":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"job-form position-relative"},[n("b-form",{attrs:{id:"company-form"}},[n("label",{attrs:{for:"company-name"}},[e._v("Unternehmensname *")]),n("b-form-input",{attrs:{id:"company-name",type:"text","lazy-formatter":"",formatter:e.formatter,state:e.validated?!!e.company.name:null,placeholder:"Unternehmensname eingeben...",required:"",trim:""},model:{value:e.company.name,callback:function(t){e.$set(e.company,"name",t)},expression:"company.name"}}),n("label",{attrs:{for:"company-street"}},[e._v("Straße und Hausnummer *")]),n("b-form-input",{attrs:{id:"company-street",type:"text","lazy-formatter":"",formatter:e.formatter,state:e.validated?!!e.company.street:null,placeholder:"Straße und Hausnummer eingeben...",required:"",trim:""},model:{value:e.company.street,callback:function(t){e.$set(e.company,"street",t)},expression:"company.street"}}),n("label",{attrs:{for:"company-zip-code"}},[e._v("PLZ *")]),n("b-form-input",{attrs:{id:"company-zip-code",type:"text",state:e.validated?!!e.company.zipCode:null,placeholder:"PLZ eingeben...",required:"",trim:""},model:{value:e.company.zipCode,callback:function(t){e.$set(e.company,"zipCode",t)},expression:"company.zipCode"}}),n("label",{attrs:{for:"company-location"}},[e._v("Ort *")]),n("b-form-input",{attrs:{id:"company-location",type:"text","lazy-formatter":"",formatter:e.formatter,state:e.validated?!!e.company.location:null,placeholder:"Ort eingeben...",required:"",trim:""},model:{value:e.company.location,callback:function(t){e.$set(e.company,"location",t)},expression:"company.location"}}),n("label",{attrs:{for:"company-country"}},[e._v("Land *")]),n("b-form-select",{attrs:{id:"company-country",state:e.validated?!!e.company.country:null},model:{value:e.company.country,callback:function(t){e.$set(e.company,"country",t)},expression:"company.country"}},[n("b-form-select-option",{attrs:{value:"",disabled:""}},[e._v("-- Land auswählen --")]),e._l(e.companyCountryOptions,(function(t){return n("b-form-select-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],2),n("label",{attrs:{for:"company-size"}},[e._v("Unternehmensgröße *")]),n("b-form-select",{attrs:{id:"company-size",state:e.validated?!!e.company.size:null},model:{value:e.company.size,callback:function(t){e.$set(e.company,"size",t)},expression:"company.size"}},[n("b-form-select-option",{attrs:{value:"",disabled:""}},[e._v("-- Unternehmensgröße auswählen --")]),e._l(e.companySizeOptions,(function(t){return n("b-form-select-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],2),n("label",{attrs:{for:"company-url"}},[e._v("Unternehmenswebseite")]),n("b-input-group",{scopedSlots:e._u([{key:"prepend",fn:function(){return[n("b-input-group-text",[n("Fa",{attrs:{icon:"link"}})],1)]},proxy:!0}])},[n("b-form-input",{attrs:{id:"company-url",type:"url","lazy-formatter":"",formatter:e.formatter,state:e.validated&&!!e.company.url||null,placeholder:"https://www.ihr-unternehmen.de"},model:{value:e.company.url,callback:function(t){e.$set(e.company,"url",t)},expression:"company.url"}})],1),n("label",{attrs:{for:"file"}},[e._v("Logo (jpg, png | max. 5MB)")]),n("ImageUploader",{attrs:{validated:e.validated,"image-url":e.company.logoUrl,width:200,height:200,fit:"inside"},on:{"update-url":function(t){e.company.logoUrl=t}}}),e.$store.state.auth.user.isAdmin?n("b-form-input",{staticClass:"bg-light-shade mt-2",attrs:{type:"url",placeholder:"ADMIN - URL to image (incl. https://)"},model:{value:e.company.logoUrl,callback:function(t){e.$set(e.company,"logoUrl",t)},expression:"company.logoUrl"}}):e._e(),n("div",{staticClass:"position-relative d-flex justify-content-center align-items-center bg-secondary rounded mt-2",staticStyle:{width:"55px",height:"55px"}},[e.company.logoUrl?n("b-img",{attrs:{src:e.company.logoUrl,fluid:""}}):n("Fa",{attrs:{icon:"box-open",size:"lg"}})],1),n("div",{staticClass:"d-flex justify-content-between my-4"},[n("b-button",{attrs:{variant:"outline-danger"},on:{click:function(t){return t.preventDefault(),e.$router.go(-1)}}},[e._v(" Abbrechen ")]),n("b-button",{attrs:{variant:"success"},on:{click:function(t){return t.preventDefault(),e.onSubmit(t)}}},[e.success?n("Fa",{staticClass:"mr-2",attrs:{icon:"check"}}):e._e(),e._v(" "+e._s(e.success?"Gespeichert":"Speichern")+" ")],1)],1)],1),e.error?n("b-alert",{staticClass:"mt-3",attrs:{show:"",dismissible:"",variant:"danger"}},[e._v(e._s(e.error))]):e._e()],1)},o=[],r=(n("b0c0"),n("ac1f"),n("5319"),n("96cf"),n("c964")),s=n("67cc"),i=n("1ba6"),c=n("5641"),l={name:"CompanyForm",components:{ImageUploader:c["a"]},mixins:[s["a"]],props:{apiJobsSchema:{type:String,default:"private"}},data:function(){return{company:{_id:this.$route.params.companyId,name:"",street:"",location:"",zipCode:"",state:"",country:"",geoCodeLat:null,geoCodeLng:null,size:"",url:"",logoUrl:""},companyCountryOptions:i["a"],companyStateOptions:i["c"],companySizeOptions:i["b"],validated:null,success:"",error:""}},created:function(){"new"!=this.$route.params.companyId&&this.getCompany(this.$route.params.companyId)},methods:{getCompany:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.get("/graphql",{params:{query:'\n                          query {\n                              company(_id: "'.concat(e,'") {\n                                  _id\n                                  name\n                                  street\n                                  location\n                                  zipCode\n                                  state\n                                  country\n                                  geoCodeLat\n                                  geoCodeLng\n                                  size\n                                  url\n                                  logoUrl\n                              }\n                          }\n                      ')}});case 3:a=n.sent,t.company=a.data.data.company,n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),t.$root.$bvToast.toast("Beim Laden des Unternehmens ist ein Fehler aufgetreten. Bitte versuchen Sie es noch einmal, indem Sie die Seite neu laden.",{title:"Fehler beim Laden",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},onSubmit:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.error=!1,e.formValidation()){t.next=4;break}return e.error="Bitte füllen Sie die erforderlichen Felder aus!",t.abrupt("return",null);case 4:return e.$store.dispatch("setOverlay",!0),n="new"===e.company._id?"addCompany":"admin"===e.apiJobsSchema?"adminUpdateCompany":"updateCompany",t.next=8,e.saveCompany(n,e.company,!0);case 8:a=t.sent,e.success=a.success,e.$store.dispatch("setOverlay",!1);case 11:case"end":return t.stop()}}),t)})))()},formatter:function(e){return e.replace('"',"'").replace("&","+")},formValidation:function(){return this.validated=!0,!!(this.company.name&&this.company.country&&this.company.location&&this.company.street&&this.company.zipCode&&this.company.size)},formReset:function(){for(var e in this.company)this.company[e]=""},hasHistory:function(){return window.history.length>2}}},m=l,p=n("2877"),u=Object(p["a"])(m,a,o,!1,null,null,null);t["a"]=u.exports},"9ddf":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"edit-company py-5"},[n("h2",[e._v(" Unternehmen "+e._s("new"===e.$route.params.companyId?"erstellen":"bearbeiten")+" ")]),n("CompanyForm",{attrs:{"api-jobs-schema":"private"}})],1)},o=[],r=n("1ce6"),s={name:"UserDashboardEditCompany",components:{CompanyForm:r["a"]}},i=s,c=n("2877"),l=Object(c["a"])(i,a,o,!1,null,null,null);t["default"]=l.exports},da34:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"edit-company py-5"},[n("h2",[e._v("Unternehmen bearbeiten")]),n("CompanyForm",{attrs:{"api-jobs-schema":"admin"}})],1)},o=[],r=n("1ce6"),s={name:"AdminEditCompany",components:{CompanyForm:r["a"]}},i=s,c=n("2877"),l=Object(c["a"])(i,a,o,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=company_edit.959e1b1d.js.map