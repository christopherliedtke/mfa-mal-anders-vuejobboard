(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["company_edit"],{"5a86":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-company container py-5"},[a("h2",[t._v(" Unternehmen "+t._s("new"===t.$route.params.companyId?"erstellen":"bearbeiten")+" ")]),a("CompanyDataForm",{attrs:{"api-jobs-schema":"private"}})],1)},o=[],r=a("8957"),i={name:"UserCompanyEdit",components:{CompanyDataForm:r["a"]}},s=i,c=a("2877"),l=Object(c["a"])(s,n,o,!1,null,null,null);e["default"]=l.exports},"67cc":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var n=a("1da1"),o=(a("96cf"),a("99af"),a("b0c0"),a("a4d3"),a("e01a"),a("ac1f"),a("00b4"),{methods:{saveCompany:function(t,e){var a=arguments,o=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){var r,i,s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],i=a.length>3&&void 0!==a[3]?a[3]:void 0,n.prev=2,s="\n          mutation {\n            ".concat(t,"(\n              ").concat("updateCompany"===t||"adminUpdateCompany"===t?'_id: "'.concat(e._id,'",'):""," \n              ").concat(i?'userId: "'.concat(i,'",'):"",' \n              name: "').concat(e.name,'", \n              description: "').concat(e.description||"",'", \n              street: "').concat(e.street,'"\n              location: "').concat(e.location,'", \n              zipCode: "').concat(e.zipCode,'"\n              country: "').concat(e.country,'", \n              size: "').concat(e.size,'"\n              url: "').concat(!/^https?:\/\//i.test(e.url)&&e.url?"https://"+e.url:e.url,'"\n              logoUrl: "').concat(e.logoUrl,'"\n            ) {\n              _id\n            }\n          }\n      '),n.next=6,o.$axios.post("/graphql",{query:s});case 6:if(c=n.sent,!c.data.errors){n.next=11;break}throw new Error("location"===c.data.errors[0].extensions.argumentName?c.data.errors[0].message:"");case 11:return o.$root.$bvToast.toast("Das Unternehmen wurde erfolgreich gespeichert.",{title:"Unternehmen gespeichert",variant:"success",toaster:"b-toaster-bottom-right",solid:!0}),r&&(o.hasHistory&&"admin"===o.apiJobsSchema?o.$router.go(-1):o.$router.push("/user/unternehmen")),n.abrupt("return",{success:!0,companyId:c.data.data[t]._id});case 14:n.next=21;break;case 16:return n.prev=16,n.t0=n["catch"](2),console.log(n.t0),o.$root.$bvToast.toast(n.t0?n.t0.message:"Beim Speichern des Unternehmens ist ein Fehler aufgetreten. Bitte überprüfen Sie Ihre Eingaben und versuchen es noch einmal.",{title:"Fehler beim Speichern",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0}),n.abrupt("return",{success:!1});case 21:case"end":return n.stop()}}),n,null,[[2,16]])})))()}}})},8957:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"job-form position-relative"},[a("b-form",{attrs:{id:"company-form"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-lg-4"},[a("label",{attrs:{for:"company-name",required:""}},[t._v("Unternehmensname")]),a("b-form-input",{attrs:{id:"company-name",type:"text","lazy-formatter":"",formatter:t.formatter,state:t.validated?!!t.company.name:null,placeholder:"Unternehmensname eingeben...",required:"",trim:""},model:{value:t.company.name,callback:function(e){t.$set(t.company,"name",e)},expression:"company.name"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-lg-4"},[a("label",{attrs:{for:"company-street",required:""}},[t._v("Straße und Hausnummer")]),a("b-form-input",{attrs:{id:"company-street",type:"text","lazy-formatter":"",formatter:t.formatter,state:t.validated?!!t.company.street:null,placeholder:"Straße und Hausnummer eingeben...",required:"",trim:""},model:{value:t.company.street,callback:function(e){t.$set(t.company,"street",e)},expression:"company.street"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-lg-4"},[a("label",{attrs:{for:"company-zip-code",required:""}},[t._v("PLZ")]),a("b-form-input",{attrs:{id:"company-zip-code",type:"text",state:t.validated?!!t.company.zipCode:null,placeholder:"PLZ eingeben...",required:"",trim:""},model:{value:t.company.zipCode,callback:function(e){t.$set(t.company,"zipCode",e)},expression:"company.zipCode"}})],1),a("div",{staticClass:"col-12 col-lg-4"},[a("label",{attrs:{for:"company-location",required:""}},[t._v("Ort")]),a("b-form-input",{attrs:{id:"company-location",type:"text","lazy-formatter":"",formatter:t.formatter,state:t.validated?!!t.company.location:null,placeholder:"Ort eingeben...",required:"",trim:""},model:{value:t.company.location,callback:function(e){t.$set(t.company,"location",e)},expression:"company.location"}})],1),a("div",{staticClass:"col-12 col-lg-4"},[a("label",{attrs:{for:"company-country",required:""}},[t._v("Land")]),a("b-form-select",{attrs:{id:"company-country",state:t.validated?!!t.company.country:null},model:{value:t.company.country,callback:function(e){t.$set(t.company,"country",e)},expression:"company.country"}},[a("b-form-select-option",{attrs:{value:"",disabled:""}},[t._v("-- Land auswählen --")]),t._l(t.companyCountryOptions,(function(e){return a("b-form-select-option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}))],2)],1),a("div",{staticClass:"col-12 col-lg-4"},[a("label",{attrs:{for:"company-url"}},[t._v("Unternehmenswebseite")]),a("b-input-group",{scopedSlots:t._u([{key:"prepend",fn:function(){return[a("b-input-group-text",[a("svg",{staticClass:"bi bi-link-45deg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"}}),a("path",{attrs:{d:"M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"}})])])]},proxy:!0}])},[a("b-form-input",{attrs:{id:"company-url",type:"url","lazy-formatter":"",formatter:t.formatter,state:t.validated&&!!t.company.url||null,placeholder:"https://www.ihr-unternehmen.de"},model:{value:t.company.url,callback:function(e){t.$set(t.company,"url",e)},expression:"company.url"}})],1)],1),a("div",{staticClass:"col-12 col-lg-4"},[a("label",{attrs:{for:"company-size"}},[t._v("Unternehmensgröße")]),a("b-form-select",{attrs:{id:"company-size",state:t.validated&&!!t.company.size||null},model:{value:t.company.size,callback:function(e){t.$set(t.company,"size",e)},expression:"company.size"}},[a("b-form-select-option",{attrs:{value:""}},[t._v("-- Unternehmensgröße auswählen --")]),t._l(t.companySizeOptions,(function(e){return a("b-form-select-option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}))],2)],1),a("div",{staticClass:"col-12 col-lg-8"},[a("label",{attrs:{for:"file"}},[t._v("Logo")]),a("ImageUploader",{attrs:{validated:t.validated,"image-url":t.company.logoUrl,width:200,height:200,fit:"outside","aria-describedby":"logo-url-help"},on:{"update-url":function(e){t.company.logoUrl=e}}}),a("b-form-text",{staticClass:"ml-2",attrs:{id:"logo-url-help"}},[t._v("jpg, png | max. 5MB")]),t.$store.state.auth.user.isAdmin?a("b-form-input",{staticClass:"bg-light-shade mt-2",attrs:{type:"url",placeholder:"ADMIN - URL to image (incl. https://)"},model:{value:t.company.logoUrl,callback:function(e){t.$set(t.company,"logoUrl",e)},expression:"company.logoUrl"}}):t._e(),a("div",{staticClass:"position-relative d-flex justify-content-center align-items-center bg-secondary rounded mt-2",staticStyle:{width:"55px",height:"55px"}},[t.company.logoUrl?a("b-img",{attrs:{src:t.company.logoUrl,fluid:""}}):a("svg",{staticClass:"bi bi-box p-3",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5 8 5.961 14.154 3.5 8.186 1.113zM15 4.239l-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"}})])],1)],1)]),a("div",[a("label",{attrs:{for:"description",role:t.company.description||t.showCompanyDescription?"":"button"},on:{click:function(e){t.showCompanyDescription=!t.showCompanyDescription}}},[t.company.description||t.showCompanyDescription?t._e():a("svg",{staticClass:"bi bi-plus-circle-fill text-primary mr-2",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"}})]),t._v("Unternehmensbeschreibung für Unternehmensprofil "),a("span",{staticClass:"small text-muted"},[t._v("[optional]")])]),t.company.description||t.showCompanyDescription?a("TipTapEditor",{attrs:{validated:t.validated,"min-length":0,content:t.company.description,placeholder:"Beschreiben Sie hier Ihr Unternehmen..."},on:{"update-content":function(e){t.company.description=e}}}):t._e()],1),a("div",{staticClass:"d-flex justify-content-between my-4"},[a("b-button",{attrs:{variant:"outline-danger"},on:{click:function(e){return e.preventDefault(),t.$router.go(-1)}}},[t._v(" Abbrechen ")]),a("b-button",{attrs:{variant:"success"},on:{click:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[t._v(" Speichern ")])],1)]),t.error?a("b-alert",{staticClass:"mt-3",attrs:{show:"",dismissible:"",variant:"danger"}},[t._v(t._s(t.error))]):t._e()],1)},o=[],r=a("1da1"),i=(a("ac1f"),a("5319"),a("b0c0"),a("96cf"),a("4aca")),s=a("324b"),c=a("67cc"),l=a("1ba6"),p={name:"CompanyDataForm",components:{ImageUploader:s["a"],TipTapEditor:i["a"]},mixins:[c["a"]],props:{apiJobsSchema:{type:String,default:"private"}},data:function(){return{company:{_id:this.$route.params.companyId,name:"",description:"",street:"",location:"",zipCode:"",state:"",country:"",geoCodeLat:null,geoCodeLng:null,size:"",url:"",logoUrl:""},showCompanyDescription:!1,companyCountryOptions:l["b"],companyStateOptions:l["d"],companySizeOptions:l["c"],validated:null,success:"",error:""}},created:function(){"new"!=this.$route.params.companyId&&this.getCompany(this.$route.params.companyId)},methods:{getCompany:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.$axios.get("/graphql",{params:{query:'\n                query {\n                    company(_id: "'.concat(t,'") {\n                        _id\n                        name\n                        description\n                        street\n                        location\n                        zipCode\n                        state\n                        country\n                        geoCodeLat\n                        geoCodeLng\n                        size\n                        url\n                        logoUrl\n                    }\n                }\n            ')}});case 3:n=a.sent,e.company=n.data.data.company,a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),e.$root.$bvToast.toast("Beim Laden des Unternehmens ist ein Fehler aufgetreten. Bitte versuchen Sie es noch einmal, indem Sie die Seite neu laden.",{title:"Fehler beim Laden",variant:"danger",toaster:"b-toaster-bottom-right",solid:!0,noAutoHide:!0});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},onSubmit:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.error=!1,t.formValidation()){e.next=4;break}return t.error="Bitte füllen Sie die erforderlichen Felder aus!",e.abrupt("return",null);case 4:return t.$store.dispatch("setOverlay",!0),a="new"===t.company._id?"addCompany":"admin"===t.apiJobsSchema?"adminUpdateCompany":"updateCompany",e.next=8,t.saveCompany(a,t.company,!0);case 8:n=e.sent,t.success=n.success,t.$store.dispatch("setOverlay",!1);case 11:case"end":return e.stop()}}),e)})))()},formatter:function(t){return t.replace('"',"'").replace("&","+")},formValidation:function(){return this.validated=!0,!!(this.company.name&&this.company.country&&this.company.location&&this.company.street&&this.company.zipCode)},formReset:function(){for(var t in this.company)this.company[t]=""},hasHistory:function(){return window.history.length>2}}},m=p,u=a("2877"),d=Object(u["a"])(m,n,o,!1,null,null,null);e["a"]=d.exports},b66f:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-company container py-5"},[a("h2",[t._v("Unternehmen bearbeiten")]),a("CompanyDataForm",{attrs:{"api-jobs-schema":"admin"}})],1)},o=[],r=a("8957"),i={name:"AdminCompanyEdit",components:{CompanyDataForm:r["a"]}},s=i,c=a("2877"),l=Object(c["a"])(s,n,o,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=company_edit-legacy.14e35971.js.map